18:30:02.492 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
18:30:02.539 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 11 - ^Registrar um usuario$
18:30:03.757 [main] INFO  com.intuit.karate - karate.env system property was: null 
18:30:03.820 [main] ERROR com.intuit.karate - src/test/java/features/Pessoas.feature:12
* def body = read('features/payloads/payload_pessoa.json')
js failed:
>>>>
01: read('features/payloads/payload_pessoa.json')
<<<<
org.graalvm.polyglot.PolyglotException: java.io.FileNotFoundException: D:\metabank\src\test\java\features\features\payloads\payload_pessoa.json (The system cannot find the path specified)
- com.intuit.karate.resource.FileResource.getStream(FileResource.java:98)
- com.intuit.karate.core.ScenarioFileReader.readFileAsStream(ScenarioFileReader.java:102)
- com.intuit.karate.core.ScenarioFileReader.readFileAsString(ScenarioFileReader.java:98)
- com.intuit.karate.core.ScenarioFileReader.readFile(ScenarioFileReader.java:56)
- com.intuit.karate.core.ScenarioEngine.lambda$new$0(ScenarioEngine.java:129)
- <js>.:program(Unnamed:1)

src/test/java/features/Pessoas.feature:12
18:30:04.695 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pessoas.feature
18:31:07.676 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
18:31:07.682 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670448667680
18:31:07.720 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 11 - ^Registrar um usuario$
18:31:08.948 [main] INFO  com.intuit.karate - karate.env system property was: null 
18:31:09.026 [main] ERROR com.intuit.karate - src/test/java/features/Pessoas.feature:12
* def body = read('classpath:payloads/payload_pessoa.json')
js failed:
>>>>
01: read('classpath:payloads/payload_pessoa.json')
<<<<
org.graalvm.polyglot.PolyglotException: not found: payloads/payload_pessoa.json
- com.intuit.karate.resource.ResourceUtils.getResource(ResourceUtils.java:118)
- com.intuit.karate.core.ScenarioFileReader.toResource(ScenarioFileReader.java:128)
- com.intuit.karate.core.ScenarioFileReader.readFileAsStream(ScenarioFileReader.java:102)
- com.intuit.karate.core.ScenarioFileReader.readFileAsString(ScenarioFileReader.java:98)
- com.intuit.karate.core.ScenarioFileReader.readFile(ScenarioFileReader.java:56)
- com.intuit.karate.core.ScenarioEngine.lambda$new$0(ScenarioEngine.java:129)
- <js>.:program(Unnamed:1)

src/test/java/features/Pessoas.feature:12
18:31:09.895 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pessoas.feature
18:32:27.093 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
18:32:27.093 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670448747093
18:32:27.125 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 11 - ^Registrar um usuario$
18:32:28.430 [main] INFO  com.intuit.karate - karate.env system property was: null 
18:32:28.540 [main] ERROR com.intuit.karate - src/test/java/features/Pessoas.feature:12
* def body = read('classpath:/payloads/payload_pessoa.json')
js failed:
>>>>
01: read('classpath:/payloads/payload_pessoa.json')
<<<<
org.graalvm.polyglot.PolyglotException: not found: /payloads/payload_pessoa.json
- com.intuit.karate.resource.ResourceUtils.getResource(ResourceUtils.java:118)
- com.intuit.karate.core.ScenarioFileReader.toResource(ScenarioFileReader.java:128)
- com.intuit.karate.core.ScenarioFileReader.readFileAsStream(ScenarioFileReader.java:102)
- com.intuit.karate.core.ScenarioFileReader.readFileAsString(ScenarioFileReader.java:98)
- com.intuit.karate.core.ScenarioFileReader.readFile(ScenarioFileReader.java:56)
- com.intuit.karate.core.ScenarioEngine.lambda$new$0(ScenarioEngine.java:129)
- <js>.:program(Unnamed:1)

src/test/java/features/Pessoas.feature:12
18:32:29.540 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pessoas.feature
18:32:44.458 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
18:32:44.458 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670448764458
18:32:44.489 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 11 - ^Registrar um usuario$
18:32:45.733 [main] INFO  com.intuit.karate - karate.env system property was: null 
18:32:46.561 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 145
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste","senha":"Teste"}

18:32:46.608 [main] DEBUG com.intuit.karate - response time in milliseconds: 47
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Wed, 07 Dec 2022 21:32:46 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":4,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","status":"Teste","login":"Teste","telefone":"11999999999"}

18:32:46.608 [main] ERROR com.intuit.karate - src/test/java/features/Pessoas.feature:17
Then status 200
status code was: 201, expected: 200, response time in milliseconds: 47, url: http://localhost:8080/pessoa, response: 
{"id":4,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","status":"Teste","login":"Teste","telefone":"11999999999"}
src/test/java/features/Pessoas.feature:17
18:32:47.326 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pessoas.feature
18:34:18.539 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
18:34:18.539 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670448858539
18:34:18.586 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 11 - ^Registrar um usuario$
18:34:19.805 [main] INFO  com.intuit.karate - karate.env system property was: null 
18:34:20.617 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

18:34:20.664 [main] DEBUG com.intuit.karate - response time in milliseconds: 47
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Wed, 07 Dec 2022 21:34:20 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

18:34:20.664 [main] ERROR com.intuit.karate - src/test/java/features/Pessoas.feature:17
Then status 200
status code was: 201, expected: 200, response time in milliseconds: 47, url: http://localhost:8080/pessoa, response: 
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}
src/test/java/features/Pessoas.feature:17
18:34:21.383 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pessoas.feature
18:41:01.268 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
18:41:01.276 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670449261274
18:41:01.317 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 11 - ^Registrar uma pessoa$
18:41:02.392 [main] INFO  com.intuit.karate - karate.env system property was: null 
18:41:03.177 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

18:41:03.214 [main] DEBUG com.intuit.karate - response time in milliseconds: 35
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Wed, 07 Dec 2022 21:41:03 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

18:41:03.225 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/8
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


18:41:03.231 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Wed, 07 Dec 2022 21:41:03 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

18:41:04.053 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pessoas.feature
21:29:30.586 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
21:29:30.594 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670459370592
21:29:30.638 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 12 - ^Criar uma nova carteira e validar seu registro$
21:29:31.728 [main] INFO  com.intuit.karate - karate.env system property was: null 
21:29:31.792 [main] ERROR com.intuit.karate - src/test/java/features/Carteira.feature:13
* def novaPessoa = callonce(read('classpath:features/Pessoas.feature@TC-01'))
js failed:
>>>>
01: callonce(read('classpath:features/Pessoas.feature@TC-01'))
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "callonce" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Carteira.feature:13
21:29:32.605 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
21:30:19.970 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
21:30:19.977 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670459419976
21:30:20.012 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 12 - ^Criar uma nova carteira e validar seu registro$
21:30:21.259 [main] INFO  com.intuit.karate - karate.env system property was: null 
21:30:21.331 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
21:30:22.179 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

21:30:22.237 [main] DEBUG com.intuit.karate - response time in milliseconds: 55
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 00:30:22 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:30:22.249 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/9
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


21:30:22.259 [main] DEBUG com.intuit.karate - response time in milliseconds: 9
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 00:30:22 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:30:22.286 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":9},"saldo":10000.0}

21:30:22.292 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 00:30:22 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":5,"idPessoa":{"id":9,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

21:30:22.295 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


21:30:22.319 [main] DEBUG com.intuit.karate - response time in milliseconds: 24
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 00:30:22 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":5,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

21:30:22.322 [main] ERROR com.intuit.karate - src/test/java/features/Carteira.feature:28
Then match response.id contains idCarteira
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  5

src/test/java/features/Carteira.feature:28
21:30:23.372 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
21:30:59.114 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
21:30:59.132 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670459459124
21:30:59.174 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 12 - ^Criar uma nova carteira e validar seu registro$
21:31:00.902 [main] INFO  com.intuit.karate - karate.env system property was: null 
21:31:00.963 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
21:31:01.747 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

21:31:01.785 [main] DEBUG com.intuit.karate - response time in milliseconds: 36
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 00:31:01 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:31:01.795 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


21:31:01.801 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 00:31:01 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:31:01.824 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":10},"saldo":10000.0}

21:31:01.831 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 00:31:01 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":6,"idPessoa":{"id":10,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

21:31:01.835 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


21:31:01.851 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 00:31:01 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":5,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":6,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

21:31:02.787 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
21:32:05.696 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
21:32:05.703 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670459525702
21:32:05.744 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 12 - ^Criar uma nova carteira e validar seu registro$
21:32:06.958 [main] INFO  com.intuit.karate - karate.env system property was: null 
21:32:07.013 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
21:32:07.719 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

21:32:07.748 [main] DEBUG com.intuit.karate - response time in milliseconds: 26
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 00:32:07 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:32:07.757 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/11
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


21:32:07.761 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 00:32:07 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:32:07.776 [main] INFO  com.intuit.karate - [print] 11 
21:32:07.778 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":11},"saldo":10000.0}

21:32:07.783 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 00:32:07 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":7,"idPessoa":{"id":11,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

21:32:07.785 [main] INFO  com.intuit.karate - [print] 7 
21:32:07.787 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


21:32:07.798 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 00:32:07 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":5,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":6,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

21:32:08.657 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
21:32:47.040 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
21:32:47.046 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670459567045
21:32:47.079 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 12 - ^Criar uma nova carteira e validar seu registro$
21:32:48.384 [main] INFO  com.intuit.karate - karate.env system property was: null 
21:32:48.445 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
21:32:49.143 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

21:32:49.174 [main] DEBUG com.intuit.karate - response time in milliseconds: 30
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 00:32:49 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:32:49.177 [main] INFO  com.intuit.karate - [print] {
  "id": 12,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
21:32:49.186 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/12
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


21:32:49.191 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 00:32:49 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:32:49.192 [main] INFO  com.intuit.karate - [print] {
  "id": 12,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
21:32:49.206 [main] INFO  com.intuit.karate - [print] 12 
21:32:49.209 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":12},"saldo":10000.0}

21:32:49.214 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 00:32:49 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":8,"idPessoa":{"id":12,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

21:32:49.215 [main] INFO  com.intuit.karate - [print] {
  "id": 8,
  "idPessoa": {
    "id": 12,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
21:32:49.217 [main] INFO  com.intuit.karate - [print] 8 
21:32:49.218 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


21:32:49.230 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 00:32:49 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":5,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":6,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":8,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

21:32:49.232 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 6,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
21:32:50.109 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
21:38:52.070 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
21:38:52.076 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670459932074
21:38:52.116 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Deletar carteira e confirmar remoção via listagem$
21:38:53.207 [main] INFO  com.intuit.karate - karate.env system property was: null 
21:38:53.363 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
21:38:53.379 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
21:38:54.050 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

21:38:54.191 [main] DEBUG com.intuit.karate - response time in milliseconds: 141
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 00:38:54 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:38:54.191 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
21:38:54.207 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


21:38:54.222 [main] DEBUG com.intuit.karate - response time in milliseconds: 15
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 00:38:54 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

21:38:54.222 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
21:38:54.238 [main] INFO  com.intuit.karate - [print] 3 
21:38:54.254 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

21:38:54.269 [main] DEBUG com.intuit.karate - response time in milliseconds: 15
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 00:38:54 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

21:38:54.269 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
21:38:54.285 [main] INFO  com.intuit.karate - [print] 3 
21:38:54.285 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


21:38:54.300 [main] DEBUG com.intuit.karate - response time in milliseconds: 15
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 00:38:54 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

21:38:54.300 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
21:38:54.300 [main] INFO  com.intuit.karate - [print] 3 
21:38:55.285 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
13:46:16.720 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
13:46:16.748 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670517976746
13:46:16.787 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Deletar carteira \+ conta e confirmar remoção via listagem$
13:46:17.991 [main] INFO  com.intuit.karate - karate.env system property was: null 
13:46:18.123 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
13:46:18.150 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
13:46:19.596 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

13:46:19.634 [main] DEBUG com.intuit.karate - response time in milliseconds: 36
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 16:46:19 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

13:46:19.638 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
13:46:19.647 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/5
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


13:46:19.651 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 16:46:19 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

13:46:19.652 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
13:46:19.668 [main] INFO  com.intuit.karate - [print] 5 
13:46:19.672 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":5},"saldo":10000.0}

13:46:19.677 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 16:46:19 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":5,"idPessoa":{"id":5,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

13:46:19.678 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "idPessoa": {
    "id": 5,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
13:46:19.680 [main] INFO  com.intuit.karate - [print] 5 
13:46:19.681 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


13:46:19.690 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 16:46:19 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

13:46:19.692 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
13:46:19.696 [main] DEBUG com.intuit.karate - request:
5 > GET http://localhost:8080/carteira/5
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate


13:46:19.714 [main] DEBUG com.intuit.karate - response time in milliseconds: 18
5 < 405
5 < Allow: DELETE
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 16:46:19 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T16:46:19.709+00:00","status":405,"error":"Method Not Allowed","trace":"org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:261)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:441)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:126)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:504)\r\n\tat org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1274)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1056)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:895)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:705)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Method 'GET' is not supported.","path":"/carteira/5"}

13:46:19.717 [main] ERROR com.intuit.karate - src/test/java/features/Carteira.feature:40
Then status 200
status code was: 405, expected: 200, response time in milliseconds: 18, url: http://localhost:8080/carteira/5, response: 
{"timestamp":"2022-12-08T16:46:19.709+00:00","status":405,"error":"Method Not Allowed","trace":"org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:261)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:441)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:126)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:504)\r\n\tat org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1274)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1056)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:895)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:705)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Method 'GET' is not supported.","path":"/carteira/5"}
src/test/java/features/Carteira.feature:40
13:46:20.806 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
13:47:10.010 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
13:47:10.017 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670518030016
13:47:10.061 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Deletar carteira \+ conta e confirmar remoção via listagem$
13:47:11.665 [main] INFO  com.intuit.karate - karate.env system property was: null 
13:47:11.880 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
13:47:11.897 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
13:47:12.967 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

13:47:13.014 [main] DEBUG com.intuit.karate - response time in milliseconds: 44
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 16:47:12 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":6,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

13:47:13.017 [main] INFO  com.intuit.karate - [print] {
  "id": 6,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
13:47:13.030 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/6
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


13:47:13.035 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 16:47:12 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":6,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

13:47:13.037 [main] INFO  com.intuit.karate - [print] {
  "id": 6,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
13:47:13.058 [main] INFO  com.intuit.karate - [print] 6 
13:47:13.061 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":6},"saldo":10000.0}

13:47:13.067 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 16:47:12 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":6,"idPessoa":{"id":6,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

13:47:13.068 [main] INFO  com.intuit.karate - [print] {
  "id": 6,
  "idPessoa": {
    "id": 6,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
13:47:13.070 [main] INFO  com.intuit.karate - [print] 6 
13:47:13.073 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


13:47:13.085 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 16:47:12 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":6,"idPessoa":{"id":6,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

13:47:13.088 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 6,
    "idPessoa": {
      "id": 6,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
13:47:13.095 [main] DEBUG com.intuit.karate - request:
5 > DELETE http://localhost:8080/carteira/6
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate


13:47:13.110 [main] DEBUG com.intuit.karate - response time in milliseconds: 13
5 < 200
5 < Content-Type: text/plain;charset=UTF-8
5 < Content-Length: 27
5 < Date: Thu, 08 Dec 2022 16:47:12 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
Conta deletada com Sucesso!

13:47:13.113 [main] DEBUG com.intuit.karate - request:
6 > GET http://localhost:8080/carteira
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


13:47:13.128 [main] DEBUG com.intuit.karate - response time in milliseconds: 15
6 < 200
6 < Content-Type: application/json
6 < Transfer-Encoding: chunked
6 < Date: Thu, 08 Dec 2022 16:47:12 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

13:47:14.576 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Carteira.feature
14:04:33.091 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:04:33.099 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519073098
14:04:33.164 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 29 - ^Cadastrar chave tipo .*$
14:04:34.465 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:04:34.708 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:04:34.725 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:04:35.562 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:04:35.611 [main] DEBUG com.intuit.karate - response time in milliseconds: 46
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:04:35 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.615 [main] INFO  com.intuit.karate - [print] {
  "id": 7,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.629 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/7
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:04:35.635 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:04:35 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.636 [main] INFO  com.intuit.karate - [print] {
  "id": 7,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.655 [main] INFO  com.intuit.karate - [print] 7 
14:04:35.659 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":7},"saldo":10000.0}

14:04:35.665 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:04:35 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":8,"idPessoa":{"id":7,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:04:35.666 [main] INFO  com.intuit.karate - [print] {
  "id": 8,
  "idPessoa": {
    "id": 7,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:04:35.668 [main] INFO  com.intuit.karate - [print] 8 
14:04:35.670 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:04:35.683 [main] DEBUG com.intuit.karate - response time in milliseconds: 13
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:04:35 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:04:35.685 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:04:35.702 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:04:35.710 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:04:35 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:04:35.709+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:04:35.711 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 8, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:04:35.709+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:04:35.712 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 30 - ^Cadastrar chave tipo .*$
14:04:35.719 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:04:35.727 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:04:35.737 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:04:35.746 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:04:35.752 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:04:35 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.753 [main] INFO  com.intuit.karate - [print] {
  "id": 8,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.756 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/8
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:04:35.764 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:04:35 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.765 [main] INFO  com.intuit.karate - [print] {
  "id": 8,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.770 [main] INFO  com.intuit.karate - [print] 8 
14:04:35.774 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":8},"saldo":10000.0}

14:04:35.782 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:04:35 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":9,"idPessoa":{"id":8,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:04:35.783 [main] INFO  com.intuit.karate - [print] {
  "id": 9,
  "idPessoa": {
    "id": 8,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:04:35.785 [main] INFO  com.intuit.karate - [print] 9 
14:04:35.787 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:04:35.810 [main] DEBUG com.intuit.karate - response time in milliseconds: 23
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:04:35 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:04:35.812 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:04:35.818 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 49
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:04:35.824 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:04:35 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:04:35.822+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:04:35.825 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 6, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:04:35.822+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:04:35.826 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 31 - ^Cadastrar chave tipo .*$
14:04:35.833 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:04:35.839 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:04:35.846 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:04:35.852 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:04:35.858 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:04:35 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.859 [main] INFO  com.intuit.karate - [print] {
  "id": 9,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.861 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/9
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:04:35.867 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:04:35 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.868 [main] INFO  com.intuit.karate - [print] {
  "id": 9,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.871 [main] INFO  com.intuit.karate - [print] 9 
14:04:35.871 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":9},"saldo":10000.0}

14:04:35.881 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:04:35 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":10,"idPessoa":{"id":9,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:04:35.883 [main] INFO  com.intuit.karate - [print] {
  "id": 10,
  "idPessoa": {
    "id": 9,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:04:35.884 [main] INFO  com.intuit.karate - [print] 10 
14:04:35.885 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:04:35.906 [main] DEBUG com.intuit.karate - response time in milliseconds: 21
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:04:35 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:04:35.908 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:04:35.914 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 45
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:04:35.920 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:04:35 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:04:35.919+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:04:35.921 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 6, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:04:35.919+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:04:35.922 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 32 - ^Cadastrar chave tipo .*$
14:04:35.927 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:04:35.932 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:04:35.940 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:04:35.947 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:04:35.955 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:04:35 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.956 [main] INFO  com.intuit.karate - [print] {
  "id": 10,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.959 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:04:35.964 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:04:35 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:04:35.965 [main] INFO  com.intuit.karate - [print] {
  "id": 10,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:04:35.969 [main] INFO  com.intuit.karate - [print] 10 
14:04:35.971 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":10},"saldo":10000.0}

14:04:35.979 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:04:35 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":11,"idPessoa":{"id":10,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:04:35.980 [main] INFO  com.intuit.karate - [print] {
  "id": 11,
  "idPessoa": {
    "id": 10,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:04:35.981 [main] INFO  com.intuit.karate - [print] 11 
14:04:35.983 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:04:36.006 [main] DEBUG com.intuit.karate - response time in milliseconds: 23
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:04:35 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:04:36.008 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:04:36.129 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 49
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:04:36.135 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:04:35 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:04:36.134+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:04:36.136 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 6, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:04:36.134+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:04:37.498 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:05:08.603 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:05:08.610 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519108608
14:05:08.648 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 29 - ^Cadastrar chave tipo .*$
14:05:10.074 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:10.199 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:05:10.216 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:05:10.938 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:05:10.973 [main] DEBUG com.intuit.karate - response time in milliseconds: 33
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:10.976 [main] INFO  com.intuit.karate - [print] {
  "id": 11,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:10.987 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/11
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:05:10.993 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:05:10 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:10.994 [main] INFO  com.intuit.karate - [print] {
  "id": 11,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:11.017 [main] INFO  com.intuit.karate - [print] 11 
14:05:11.020 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":11},"saldo":10000.0}

14:05:11.027 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:05:10 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":12,"idPessoa":{"id":11,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:05:11.028 [main] INFO  com.intuit.karate - [print] {
  "id": 12,
  "idPessoa": {
    "id": 11,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:05:11.030 [main] INFO  com.intuit.karate - [print] 12 
14:05:11.032 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:05:11.054 [main] DEBUG com.intuit.karate - response time in milliseconds: 21
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:05:10 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:05:11.056 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:05:11.071 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:05:11.079 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:05:10 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:05:11.078+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:05:11.081 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 7, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:05:11.078+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:05:11.082 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 30 - ^Cadastrar chave tipo .*$
14:05:11.090 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:11.100 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:05:11.111 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:05:11.119 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:05:11.128 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:11.130 [main] INFO  com.intuit.karate - [print] {
  "id": 12,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:11.133 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/12
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:05:11.139 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:05:10 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:11.140 [main] INFO  com.intuit.karate - [print] {
  "id": 12,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:11.145 [main] INFO  com.intuit.karate - [print] 12 
14:05:11.148 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":12},"saldo":10000.0}

14:05:11.155 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:05:10 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":13,"idPessoa":{"id":12,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:05:11.156 [main] INFO  com.intuit.karate - [print] {
  "id": 13,
  "idPessoa": {
    "id": 12,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:05:11.158 [main] INFO  com.intuit.karate - [print] 13 
14:05:11.160 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:05:11.185 [main] DEBUG com.intuit.karate - response time in milliseconds: 24
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:05:10 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:05:11.186 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:05:11.195 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 49
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:05:11.203 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:05:10 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:05:11.201+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:05:11.204 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 7, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:05:11.201+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:05:11.205 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 31 - ^Cadastrar chave tipo .*$
14:05:11.214 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:11.221 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:05:11.231 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:05:11.241 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:05:11.248 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:11.249 [main] INFO  com.intuit.karate - [print] {
  "id": 13,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:11.252 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/13
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:05:11.258 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:05:10 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:11.259 [main] INFO  com.intuit.karate - [print] {
  "id": 13,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:11.264 [main] INFO  com.intuit.karate - [print] 13 
14:05:11.267 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":13},"saldo":10000.0}

14:05:11.272 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:05:10 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":14,"idPessoa":{"id":13,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:05:11.273 [main] INFO  com.intuit.karate - [print] {
  "id": 14,
  "idPessoa": {
    "id": 13,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:05:11.275 [main] INFO  com.intuit.karate - [print] 14 
14:05:11.276 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:05:11.298 [main] DEBUG com.intuit.karate - response time in milliseconds: 21
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:05:10 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:05:11.299 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:05:11.304 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 45
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:05:11.309 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:05:10 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:05:11.308+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:05:11.310 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 5, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:05:11.308+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:05:11.311 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 32 - ^Cadastrar chave tipo .*$
14:05:11.317 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:11.324 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:05:11.328 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:05:11.338 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:05:11.345 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:11.346 [main] INFO  com.intuit.karate - [print] {
  "id": 14,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:11.348 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/14
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:05:11.352 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:05:10 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:11.353 [main] INFO  com.intuit.karate - [print] {
  "id": 14,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:11.358 [main] INFO  com.intuit.karate - [print] 14 
14:05:11.360 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":14},"saldo":10000.0}

14:05:11.366 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:05:10 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":15,"idPessoa":{"id":14,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:05:11.367 [main] INFO  com.intuit.karate - [print] {
  "id": 15,
  "idPessoa": {
    "id": 14,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:05:11.368 [main] INFO  com.intuit.karate - [print] 15 
14:05:11.369 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:05:11.471 [main] DEBUG com.intuit.karate - response time in milliseconds: 102
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:05:10 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":15,"idPessoa":{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:05:11.476 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 15,
    "idPessoa": {
      "id": 14,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:05:11.482 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pixundefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 49
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:05:11.487 [main] DEBUG com.intuit.karate - response time in milliseconds: 3
5 < 404
5 < Vary: Origin
5 < Vary: Access-Control-Request-Method
5 < Vary: Access-Control-Request-Headers
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:05:10 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"timestamp":"2022-12-08T17:05:11.486+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}

14:05:11.487 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 404, expected: 200, response time in milliseconds: 3, url: http://localhost:8080/chaves-pixundefined, response: 
{"timestamp":"2022-12-08T17:05:11.486+00:00","status":404,"error":"Not Found","message":"No message available","path":"/chaves-pixundefined"}
src/test/java/features/Pix.feature:22
14:05:12.835 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:05:47.968 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:05:47.974 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519147973
14:05:48.012 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 29 - ^Cadastrar chave tipo .*$
14:05:49.432 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:49.671 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:05:49.673 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:05:49.688 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:05:50.417 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:05:50.453 [main] DEBUG com.intuit.karate - response time in milliseconds: 34
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:50 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:50.456 [main] INFO  com.intuit.karate - [print] {
  "id": 15,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:50.467 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/15
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:05:50.470 [main] DEBUG com.intuit.karate - response time in milliseconds: 3
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:05:50 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:05:50.472 [main] INFO  com.intuit.karate - [print] {
  "id": 15,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:05:50.487 [main] INFO  com.intuit.karate - [print] 15 
14:05:50.491 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":15},"saldo":10000.0}

14:05:50.496 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:05:50 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":16,"idPessoa":{"id":15,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:05:50.497 [main] INFO  com.intuit.karate - [print] {
  "id": 16,
  "idPessoa": {
    "id": 15,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:05:50.498 [main] INFO  com.intuit.karate - [print] 16 
14:05:50.500 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:05:50.519 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:05:50 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":15,"idPessoa":{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":16,"idPessoa":{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:05:50.522 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 15,
    "idPessoa": {
      "id": 14,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 16,
    "idPessoa": {
      "id": 15,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:05:50.527 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:05:50.541 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/undefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:05:50.547 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
5 < 400
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:05:50 GMT
5 < Connection: close
{"timestamp":"2022-12-08T17:05:50.545+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:05:50.548 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 6, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:05:50.545+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:05:50.550 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 30 - ^Cadastrar chave tipo .*$
14:05:50.557 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:50.569 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/undefined
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:05:50.577 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
1 < 400
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:50 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:05:50.575+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:05:50.579 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 8, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:05:50.575+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:05:50.580 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 31 - ^Cadastrar chave tipo .*$
14:05:50.585 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:50.596 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/undefined
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:05:50.602 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
1 < 400
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:50 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:05:50.601+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:05:50.604 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 5, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:05:50.601+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:05:50.606 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 32 - ^Cadastrar chave tipo .*$
14:05:50.611 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:05:50.619 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/undefined
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:05:50.629 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
1 < 400
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:05:50 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:05:50.627+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:05:50.632 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 10, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:05:50.627+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:05:51.889 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:07:18.438 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:07:18.446 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519238444
14:07:18.492 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 29 - ^Cadastrar chave tipo .*$
14:07:19.784 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:07:19.911 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:07:19.913 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:07:19.929 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:07:19.930 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:07:20.626 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:07:20.657 [main] DEBUG com.intuit.karate - response time in milliseconds: 30
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:07:20 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":16,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:07:20.659 [main] INFO  com.intuit.karate - [print] {
  "id": 16,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:07:20.668 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/16
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:07:20.672 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:07:20 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":16,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:07:20.673 [main] INFO  com.intuit.karate - [print] {
  "id": 16,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:07:20.686 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:07:20.687 [main] INFO  com.intuit.karate - [print] 16 
14:07:20.690 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":16},"saldo":10000.0}

14:07:20.695 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:07:20 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":17,"idPessoa":{"id":16,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:07:20.696 [main] INFO  com.intuit.karate - [print] {
  "id": 17,
  "idPessoa": {
    "id": 16,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:07:20.698 [main] INFO  com.intuit.karate - [print] 17 
14:07:20.700 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:07:20.714 [main] DEBUG com.intuit.karate - response time in milliseconds: 14
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:07:20 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":15,"idPessoa":{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":16,"idPessoa":{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":17,"idPessoa":{"id":16,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:07:20.716 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 15,
    "idPessoa": {
      "id": 14,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 16,
    "idPessoa": {
      "id": 15,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 17,
    "idPessoa": {
      "id": 16,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:07:20.719 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:07:20.731 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/undefined
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:07:20.736 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
5 < 400
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:07:20 GMT
5 < Connection: close
{"timestamp":"2022-12-08T17:07:20.735+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:07:20.738 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 5, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:07:20.735+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:07:20.740 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 30 - ^Cadastrar chave tipo .*$
14:07:20.748 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:07:20.760 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/undefined
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:07:20.769 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
1 < 400
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:07:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:07:20.767+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:07:20.770 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 7, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:07:20.767+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:07:20.775 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 31 - ^Cadastrar chave tipo .*$
14:07:20.780 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:07:20.790 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/undefined
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:07:20.796 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
1 < 400
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:07:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:07:20.794+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:07:20.797 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 6, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:07:20.794+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:07:20.799 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 32 - ^Cadastrar chave tipo .*$
14:07:20.804 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:07:20.816 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/undefined
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:07:20.822 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
1 < 400
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:07:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:07:20.820+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}

14:07:20.823 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 400, expected: 200, response time in milliseconds: 5, url: http://localhost:8080/chaves-pix/undefined, response: 
{"timestamp":"2022-12-08T17:07:20.820+00:00","status":400,"error":"Bad Request","trace":"org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)\r\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:181)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:148)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.NumberFormatException: For input string: \"undefined\"\r\n\tat java.base/java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.base/java.lang.Long.parseLong(Unknown Source)\r\n\tat java.base/java.lang.Long.valueOf(Unknown Source)\r\n\tat org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:206)\r\n\tat org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)\r\n\tat org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)\r\n\tat org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:729)\r\n\tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)\r\n\t... 51 more\r\n","message":"Failed to convert value of type 'java.lang.String' to required type 'long'; For input string: \"undefined\"","path":"/chaves-pix/undefined"}
src/test/java/features/Pix.feature:22
14:07:22.026 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:08:03.165 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:08:03.171 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519283170
14:08:03.208 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 29 - ^Cadastrar chave tipo .*$
14:08:04.464 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:04.581 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:08:04.582 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:08:04.596 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:08:04.596 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:08:05.320 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:08:05.359 [main] DEBUG com.intuit.karate - response time in milliseconds: 36
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:05 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":17,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:08:05.361 [main] INFO  com.intuit.karate - [print] {
  "id": 17,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:08:05.372 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/17
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:08:05.378 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:08:05 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":17,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:08:05.379 [main] INFO  com.intuit.karate - [print] {
  "id": 17,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:08:05.397 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:08:05.398 [main] INFO  com.intuit.karate - [print] 17 
14:08:05.401 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":17},"saldo":10000.0}

14:08:05.409 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:08:05 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":18,"idPessoa":{"id":17,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:08:05.410 [main] INFO  com.intuit.karate - [print] {
  "id": 18,
  "idPessoa": {
    "id": 17,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:08:05.412 [main] INFO  com.intuit.karate - [print] 18 
14:08:05.414 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:08:05.432 [main] DEBUG com.intuit.karate - response time in milliseconds: 18
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:08:05 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":15,"idPessoa":{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":16,"idPessoa":{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":17,"idPessoa":{"id":16,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":18,"idPessoa":{"id":17,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:08:05.435 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 15,
    "idPessoa": {
      "id": 14,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 16,
    "idPessoa": {
      "id": 15,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 17,
    "idPessoa": {
      "id": 16,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 18,
    "idPessoa": {
      "id": 17,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:08:05.440 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:08:05.446 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/18
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:08:05.452 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:08:05 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":26,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:08:05.453 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 201, expected: 200, response time in milliseconds: 6, url: http://localhost:8080/chaves-pix/18, response: 
{"id":26,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}
src/test/java/features/Pix.feature:22
14:08:05.454 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 30 - ^Cadastrar chave tipo .*$
14:08:05.464 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:05.476 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/18
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:08:05.483 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:05 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":27,"tipoChave":"CELULAR","descricao":"11940028922"}

14:08:05.484 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 201, expected: 200, response time in milliseconds: 7, url: http://localhost:8080/chaves-pix/18, response: 
{"id":27,"tipoChave":"CELULAR","descricao":"11940028922"}
src/test/java/features/Pix.feature:22
14:08:05.485 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 31 - ^Cadastrar chave tipo .*$
14:08:05.493 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:05.505 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/18
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:08:05.514 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:05 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":28,"tipoChave":"CPF","descricao":"50308547699"}

14:08:05.515 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 201, expected: 200, response time in milliseconds: 8, url: http://localhost:8080/chaves-pix/18, response: 
{"id":28,"tipoChave":"CPF","descricao":"50308547699"}
src/test/java/features/Pix.feature:22
14:08:05.516 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 32 - ^Cadastrar chave tipo .*$
14:08:05.521 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:05.531 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/18
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:08:05.541 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:05 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":29,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:08:05.542 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 200
status code was: 201, expected: 200, response time in milliseconds: 10, url: http://localhost:8080/chaves-pix/18, response: 
{"id":29,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}
src/test/java/features/Pix.feature:22
14:08:07.029 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:08:18.812 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:08:18.818 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519298817
14:08:18.858 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 29 - ^Cadastrar chave tipo .*$
14:08:20.085 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:20.214 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:08:20.215 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:08:20.228 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:08:20.229 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:08:20.924 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:08:20.964 [main] DEBUG com.intuit.karate - response time in milliseconds: 38
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:20 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":18,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:08:20.966 [main] INFO  com.intuit.karate - [print] {
  "id": 18,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:08:20.977 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/18
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:08:20.981 [main] DEBUG com.intuit.karate - response time in milliseconds: 3
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:08:20 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":18,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:08:20.982 [main] INFO  com.intuit.karate - [print] {
  "id": 18,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:08:20.997 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:08:20.999 [main] INFO  com.intuit.karate - [print] 18 
14:08:21.002 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":18},"saldo":10000.0}

14:08:21.008 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:08:20 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":19,"idPessoa":{"id":18,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:08:21.009 [main] INFO  com.intuit.karate - [print] {
  "id": 19,
  "idPessoa": {
    "id": 18,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:08:21.011 [main] INFO  com.intuit.karate - [print] 19 
14:08:21.012 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:08:21.032 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:08:20 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":25,"tipoChave":"EMAIL","descricao":"vsdbpessoal@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":15,"idPessoa":{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":16,"idPessoa":{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":17,"idPessoa":{"id":16,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":18,"idPessoa":{"id":17,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":26,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"},{"id":27,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":28,"tipoChave":"CPF","descricao":"50308547699"},{"id":29,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":19,"idPessoa":{"id":18,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:08:21.035 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 25,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpessoal@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 15,
    "idPessoa": {
      "id": 14,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 16,
    "idPessoa": {
      "id": 15,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 17,
    "idPessoa": {
      "id": 16,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 18,
    "idPessoa": {
      "id": 17,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 26,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacao@gmail.com"
      },
      {
        "id": 27,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 28,
        "tipoChave": "CPF",
        "descricao": "50308547699"
      },
      {
        "id": 29,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 19,
    "idPessoa": {
      "id": 18,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:08:21.040 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:08:21.045 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/19
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:08:21.069 [main] DEBUG com.intuit.karate - response time in milliseconds: 23
5 < 500
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:08:20 GMT
5 < Connection: close
{"timestamp":"2022-12-08T17:08:21.068+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}

14:08:21.072 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 23, url: http://localhost:8080/chaves-pix/19, response: 
{"timestamp":"2022-12-08T17:08:21.068+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}
src/test/java/features/Pix.feature:22
14:08:21.097 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 30 - ^Cadastrar chave tipo .*$
14:08:21.104 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:21.115 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/19
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:08:21.147 [main] DEBUG com.intuit.karate - response time in milliseconds: 30
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:08:21.144+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}

14:08:21.149 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 30, url: http://localhost:8080/chaves-pix/19, response: 
{"timestamp":"2022-12-08T17:08:21.144+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}
src/test/java/features/Pix.feature:22
14:08:21.152 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 31 - ^Cadastrar chave tipo .*$
14:08:21.158 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:21.171 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/19
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:08:21.215 [main] DEBUG com.intuit.karate - response time in milliseconds: 44
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:08:21.212+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}

14:08:21.218 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 44, url: http://localhost:8080/chaves-pix/19, response: 
{"timestamp":"2022-12-08T17:08:21.212+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}
src/test/java/features/Pix.feature:22
14:08:21.220 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 32 - ^Cadastrar chave tipo .*$
14:08:21.227 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:08:21.237 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/19
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:08:21.264 [main] DEBUG com.intuit.karate - response time in milliseconds: 25
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:08:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:08:21.262+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}

14:08:21.266 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 25, url: http://localhost:8080/chaves-pix/19, response: 
{"timestamp":"2022-12-08T17:08:21.262+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/19"}
src/test/java/features/Pix.feature:22
14:08:22.494 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:13:23.995 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:13:24.001 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519604000
14:13:24.044 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 32 - ^Cadastrar chave tipo .*$
14:13:25.619 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:25.774 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:13:25.775 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:13:25.791 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:13:25.792 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:13:26.569 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:13:26.609 [main] DEBUG com.intuit.karate - response time in milliseconds: 38
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:26 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":19,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:13:26.612 [main] INFO  com.intuit.karate - [print] {
  "id": 19,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:13:26.631 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/19
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:13:26.636 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:13:26 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":19,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:13:26.641 [main] INFO  com.intuit.karate - [print] {
  "id": 19,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:13:26.666 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:13:26.668 [main] INFO  com.intuit.karate - [print] 19 
14:13:26.672 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":19},"saldo":10000.0}

14:13:26.678 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:13:26 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":20,"idPessoa":{"id":19,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:13:26.679 [main] INFO  com.intuit.karate - [print] {
  "id": 20,
  "idPessoa": {
    "id": 19,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:13:26.681 [main] INFO  com.intuit.karate - [print] 20 
14:13:26.683 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:13:26.700 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:13:26 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":37,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":15,"idPessoa":{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":16,"idPessoa":{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":17,"idPessoa":{"id":16,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":18,"idPessoa":{"id":17,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":26,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"},{"id":27,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":28,"tipoChave":"CPF","descricao":"50308547699"},{"id":29,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":19,"idPessoa":{"id":18,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":20,"idPessoa":{"id":19,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:13:26.704 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 37,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpesl@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 15,
    "idPessoa": {
      "id": 14,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 16,
    "idPessoa": {
      "id": 15,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 17,
    "idPessoa": {
      "id": 16,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 18,
    "idPessoa": {
      "id": 17,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 26,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacao@gmail.com"
      },
      {
        "id": 27,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 28,
        "tipoChave": "CPF",
        "descricao": "50308547699"
      },
      {
        "id": 29,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 19,
    "idPessoa": {
      "id": 18,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 20,
    "idPessoa": {
      "id": 19,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:13:26.709 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:13:26.713 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/20
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:13:26.744 [main] DEBUG com.intuit.karate - response time in milliseconds: 31
5 < 500
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:13:26 GMT
5 < Connection: close
{"timestamp":"2022-12-08T17:13:26.742+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}

14:13:26.746 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 31, url: http://localhost:8080/chaves-pix/20, response: 
{"timestamp":"2022-12-08T17:13:26.742+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}
src/test/java/features/Pix.feature:22
14:13:26.749 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 33 - ^Cadastrar chave tipo .*$
14:13:26.758 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:26.771 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/20
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:13:26.806 [main] DEBUG com.intuit.karate - response time in milliseconds: 34
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:26 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:13:26.804+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}

14:13:26.808 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 34, url: http://localhost:8080/chaves-pix/20, response: 
{"timestamp":"2022-12-08T17:13:26.804+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}
src/test/java/features/Pix.feature:22
14:13:26.812 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:13:26.818 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:26.833 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/20
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:13:26.866 [main] DEBUG com.intuit.karate - response time in milliseconds: 32
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:26 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:13:26.863+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}

14:13:26.868 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 32, url: http://localhost:8080/chaves-pix/20, response: 
{"timestamp":"2022-12-08T17:13:26.863+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}
src/test/java/features/Pix.feature:22
14:13:26.872 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:13:26.876 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:26.886 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/20
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:13:26.914 [main] DEBUG com.intuit.karate - response time in milliseconds: 27
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:26 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:13:26.912+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}

14:13:26.916 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 27, url: http://localhost:8080/chaves-pix/20, response: 
{"timestamp":"2022-12-08T17:13:26.912+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/20"}
src/test/java/features/Pix.feature:22
14:13:28.562 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:13:56.843 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:13:56.849 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519636848
14:13:56.889 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:13:58.224 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:58.343 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:13:58.344 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:13:58.359 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:13:58.359 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:13:59.091 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:13:59.125 [main] DEBUG com.intuit.karate - response time in milliseconds: 32
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:59 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":20,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:13:59.127 [main] INFO  com.intuit.karate - [print] {
  "id": 20,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:13:59.138 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/20
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:13:59.141 [main] DEBUG com.intuit.karate - response time in milliseconds: 3
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:13:59 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":20,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:13:59.142 [main] INFO  com.intuit.karate - [print] {
  "id": 20,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:13:59.158 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:13:59.159 [main] INFO  com.intuit.karate - [print] 20 
14:13:59.162 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 38
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":20},"saldo":10000.0}

14:13:59.166 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:13:59 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":21,"idPessoa":{"id":20,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:13:59.167 [main] INFO  com.intuit.karate - [print] {
  "id": 21,
  "idPessoa": {
    "id": 20,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:13:59.169 [main] INFO  com.intuit.karate - [print] 21 
14:13:59.171 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:13:59.185 [main] DEBUG com.intuit.karate - response time in milliseconds: 13
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:13:59 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":7,"idPessoa":{"id":3,"cpf":"00000000000","nome":"TesteNome","email":"email@hotmail.com.br","telefone":"11999999999","status":"Teste","login":"Teste"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"CPF","descricao":"TesteRelacao"},{"id":16,"tipoChave":"ALEATORIA","descricao":"email@emailteste.com"},{"id":18,"tipoChave":"EMAIL","descricao":"11999999966"},{"id":19,"tipoChave":"ALEATORIA","descricao":"Test"},{"id":23,"tipoChave":"EMAIL","descricao":"99999999999"},{"id":37,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"}]},{"id":8,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":9,"idPessoa":{"id":8,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":10,"idPessoa":{"id":9,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":11,"idPessoa":{"id":10,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":12,"idPessoa":{"id":11,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":13,"idPessoa":{"id":12,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":14,"idPessoa":{"id":13,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":15,"idPessoa":{"id":14,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":16,"idPessoa":{"id":15,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":17,"idPessoa":{"id":16,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":18,"idPessoa":{"id":17,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":26,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"},{"id":27,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":28,"tipoChave":"CPF","descricao":"50308547699"},{"id":29,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":19,"idPessoa":{"id":18,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":20,"idPessoa":{"id":19,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":21,"idPessoa":{"id":20,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:13:59.188 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 3,
      "cpf": "00000000000",
      "nome": "TesteNome",
      "email": "email@hotmail.com.br",
      "telefone": "11999999999",
      "status": "Teste",
      "login": "Teste"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "CPF",
        "descricao": "TesteRelacao"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "email@emailteste.com"
      },
      {
        "id": 18,
        "tipoChave": "EMAIL",
        "descricao": "11999999966"
      },
      {
        "id": 19,
        "tipoChave": "ALEATORIA",
        "descricao": "Test"
      },
      {
        "id": 23,
        "tipoChave": "EMAIL",
        "descricao": "99999999999"
      },
      {
        "id": 37,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpesl@gmail.com"
      }
    ]
  },
  {
    "id": 8,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 9,
    "idPessoa": {
      "id": 8,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 10,
    "idPessoa": {
      "id": 9,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 11,
    "idPessoa": {
      "id": 10,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 12,
    "idPessoa": {
      "id": 11,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 13,
    "idPessoa": {
      "id": 12,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 14,
    "idPessoa": {
      "id": 13,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 15,
    "idPessoa": {
      "id": 14,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 16,
    "idPessoa": {
      "id": 15,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 17,
    "idPessoa": {
      "id": 16,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 18,
    "idPessoa": {
      "id": 17,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 26,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacao@gmail.com"
      },
      {
        "id": 27,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 28,
        "tipoChave": "CPF",
        "descricao": "50308547699"
      },
      {
        "id": 29,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 19,
    "idPessoa": {
      "id": 18,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 20,
    "idPessoa": {
      "id": 19,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 21,
    "idPessoa": {
      "id": 20,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:13:59.210 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:13:59.214 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/21
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:13:59.236 [main] DEBUG com.intuit.karate - response time in milliseconds: 22
5 < 500
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:13:59 GMT
5 < Connection: close
{"timestamp":"2022-12-08T17:13:59.233+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}

14:13:59.239 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 22, url: http://localhost:8080/chaves-pix/21, response: 
{"timestamp":"2022-12-08T17:13:59.233+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 26 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}
src/test/java/features/Pix.feature:22
14:13:59.243 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:13:59.250 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:59.265 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/21
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:13:59.296 [main] DEBUG com.intuit.karate - response time in milliseconds: 30
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:59 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:13:59.294+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}

14:13:59.298 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 30, url: http://localhost:8080/chaves-pix/21, response: 
{"timestamp":"2022-12-08T17:13:59.294+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 27 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}
src/test/java/features/Pix.feature:22
14:13:59.301 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:13:59.308 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:59.326 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/21
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:13:59.408 [main] DEBUG com.intuit.karate - response time in milliseconds: 82
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:59 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:13:59.406+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}

14:13:59.411 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 82, url: http://localhost:8080/chaves-pix/21, response: 
{"timestamp":"2022-12-08T17:13:59.406+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 28 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}
src/test/java/features/Pix.feature:22
14:13:59.414 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:13:59.419 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:13:59.432 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/21
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:13:59.459 [main] DEBUG com.intuit.karate - response time in milliseconds: 26
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:13:59 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:13:59.457+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}

14:13:59.461 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 26, url: http://localhost:8080/chaves-pix/21, response: 
{"timestamp":"2022-12-08T17:13:59.457+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 63 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 83 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 29 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/21"}
src/test/java/features/Pix.feature:22
14:14:00.915 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:15:33.999 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:15:34.006 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519734005
14:15:34.049 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:15:35.408 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:15:35.637 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:15:35.638 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:15:35.654 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:15:35.654 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:15:36.458 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:15:36.872 [main] DEBUG com.intuit.karate - response time in milliseconds: 410
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:15:36 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:15:36.875 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:15:36.892 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:15:36.960 [main] DEBUG com.intuit.karate - response time in milliseconds: 68
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:15:36 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:15:36.965 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:15:36.998 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:15:37.005 [main] INFO  com.intuit.karate - [print] 3 
14:15:37.011 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

14:15:37.064 [main] DEBUG com.intuit.karate - response time in milliseconds: 52
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:15:36 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:15:37.065 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:15:37.070 [main] INFO  com.intuit.karate - [print] 3 
14:15:37.073 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:15:37.177 [main] DEBUG com.intuit.karate - response time in milliseconds: 104
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:15:36 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:15:37.180 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:15:37.182 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:15:37.188 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:15:37.211 [main] DEBUG com.intuit.karate - response time in milliseconds: 23
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:15:36 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:15:37.214 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao = '11940028922'
syntax error, expected '==' for match
src/test/java/features/Pix.feature:25
14:15:37.215 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:15:37.221 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:15:37.233 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:15:37.249 [main] DEBUG com.intuit.karate - response time in milliseconds: 15
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:15:36 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

14:15:37.251 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao = '11940028922'
syntax error, expected '==' for match
src/test/java/features/Pix.feature:25
14:15:37.252 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:15:37.264 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:15:37.279 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:15:37.299 [main] DEBUG com.intuit.karate - response time in milliseconds: 20
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:15:36 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

14:15:37.302 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao = '11940028922'
syntax error, expected '==' for match
src/test/java/features/Pix.feature:25
14:15:37.303 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:15:37.308 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:15:37.319 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:15:37.333 [main] DEBUG com.intuit.karate - response time in milliseconds: 14
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:15:36 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:15:37.337 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao = '11940028922'
syntax error, expected '==' for match
src/test/java/features/Pix.feature:25
14:15:38.693 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:16:24.642 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:16:24.649 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519784648
14:16:24.704 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:16:26.027 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:16:26.143 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:16:26.144 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:16:26.156 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:16:26.157 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:16:26.954 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:16:27.274 [main] DEBUG com.intuit.karate - response time in milliseconds: 316
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:16:27 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:16:27.277 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:16:27.293 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:16:27.352 [main] DEBUG com.intuit.karate - response time in milliseconds: 59
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:16:27 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:16:27.353 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:16:27.373 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:16:27.375 [main] INFO  com.intuit.karate - [print] 3 
14:16:27.379 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

14:16:27.412 [main] DEBUG com.intuit.karate - response time in milliseconds: 33
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:16:27 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:16:27.413 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:16:27.415 [main] INFO  com.intuit.karate - [print] 3 
14:16:27.418 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:16:27.521 [main] DEBUG com.intuit.karate - response time in milliseconds: 103
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:16:27 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:16:27.523 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:16:27.525 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:16:27.528 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:16:27.550 [main] DEBUG com.intuit.karate - response time in milliseconds: 22
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:16:27 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:16:27.552 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao == '11940028922'
match failed: EQUALS
  $ | not equal (STRING:STRING)
  'emailautomacao@gmail.com'
  '11940028922'

src/test/java/features/Pix.feature:25
14:16:27.553 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:16:27.560 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:16:27.572 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:16:27.584 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:16:27 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

14:16:27.591 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/'11940028922'
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:16:27.800 [main] DEBUG com.intuit.karate - response time in milliseconds: 209
2 < 500
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:16:27 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:16:27.792+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: '11940028922'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: '11940028922'","path":"/carteira/3/'11940028922'"}

14:16:27.804 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 209, url: http://localhost:8080/carteira/3/'11940028922', response: 
{"timestamp":"2022-12-08T17:16:27.792+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: '11940028922'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: '11940028922'","path":"/carteira/3/'11940028922'"}
src/test/java/features/Pix.feature:30
14:16:27.807 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:16:27.815 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:16:27.830 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:16:27.871 [main] DEBUG com.intuit.karate - response time in milliseconds: 41
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:16:27 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

14:16:27.875 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao == '11940028922'
match failed: EQUALS
  $ | not equal (STRING:STRING)
  '50308547699'
  '11940028922'

src/test/java/features/Pix.feature:25
14:16:27.875 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:16:27.879 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:16:27.890 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:16:27.913 [main] DEBUG com.intuit.karate - response time in milliseconds: 22
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:16:27 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:16:27.915 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao == '11940028922'
match failed: EQUALS
  $ | not equal (STRING:STRING)
  'ALEATORIA'
  '11940028922'

src/test/java/features/Pix.feature:25
14:16:29.369 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:17:06.862 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:17:06.872 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519826871
14:17:06.925 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:17:08.594 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:17:08.740 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:17:08.741 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:17:08.753 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:17:08.754 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:17:09.566 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:17:10.064 [main] DEBUG com.intuit.karate - response time in milliseconds: 495
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:17:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:17:10.069 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:17:10.088 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:17:10.167 [main] DEBUG com.intuit.karate - response time in milliseconds: 78
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:17:10 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:17:10.169 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:17:10.189 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:17:10.192 [main] INFO  com.intuit.karate - [print] 3 
14:17:10.195 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

14:17:10.226 [main] DEBUG com.intuit.karate - response time in milliseconds: 31
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:17:10 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:17:10.227 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:17:10.229 [main] INFO  com.intuit.karate - [print] 3 
14:17:10.230 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:17:10.329 [main] DEBUG com.intuit.karate - response time in milliseconds: 98
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:17:10 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:17:10.332 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:17:10.335 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:17:10.341 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:17:10.368 [main] DEBUG com.intuit.karate - response time in milliseconds: 27
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:17:10 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:17:10.375 [main] DEBUG com.intuit.karate - request:
6 > DELETE http://localhost:8080/carteira/3/'emailautomacao@gmail.com'
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


14:17:10.509 [main] DEBUG com.intuit.karate - response time in milliseconds: 134
6 < 500
6 < Content-Disposition: inline;filename=f.txt
6 < Content-Type: application/json
6 < Transfer-Encoding: chunked
6 < Date: Thu, 08 Dec 2022 17:17:10 GMT
6 < Connection: close
{"timestamp":"2022-12-08T17:17:10.481+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 'emailautomacao@gmail.com'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 'emailautomacao@gmail.com'","path":"/carteira/3/'emailautomacao@gmail.com'"}

14:17:10.513 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 134, url: http://localhost:8080/carteira/3/'emailautomacao@gmail.com', response: 
{"timestamp":"2022-12-08T17:17:10.481+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 'emailautomacao@gmail.com'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 'emailautomacao@gmail.com'","path":"/carteira/3/'emailautomacao@gmail.com'"}
src/test/java/features/Pix.feature:30
14:17:10.515 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:17:10.526 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:17:10.550 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:17:10.572 [main] DEBUG com.intuit.karate - response time in milliseconds: 21
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:17:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

14:17:10.576 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/'11940028922'
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:17:10.612 [main] DEBUG com.intuit.karate - response time in milliseconds: 34
2 < 500
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:17:10 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:17:10.609+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: '11940028922'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: '11940028922'","path":"/carteira/3/'11940028922'"}

14:17:10.614 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 34, url: http://localhost:8080/carteira/3/'11940028922', response: 
{"timestamp":"2022-12-08T17:17:10.609+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: '11940028922'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: '11940028922'","path":"/carteira/3/'11940028922'"}
src/test/java/features/Pix.feature:30
14:17:10.616 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:17:10.621 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:17:10.633 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:17:10.648 [main] DEBUG com.intuit.karate - response time in milliseconds: 14
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:17:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

14:17:10.654 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/'50308547699'
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:17:10.699 [main] DEBUG com.intuit.karate - response time in milliseconds: 45
2 < 500
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:17:10 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:17:10.696+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: '50308547699'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: '50308547699'","path":"/carteira/3/'50308547699'"}

14:17:10.702 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 45, url: http://localhost:8080/carteira/3/'50308547699', response: 
{"timestamp":"2022-12-08T17:17:10.696+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: '50308547699'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: '50308547699'","path":"/carteira/3/'50308547699'"}
src/test/java/features/Pix.feature:30
14:17:10.704 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:17:10.709 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:17:10.721 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:17:10.743 [main] DEBUG com.intuit.karate - response time in milliseconds: 21
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:17:10 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:17:10.746 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/'ALEATORIA'
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:17:10.782 [main] DEBUG com.intuit.karate - response time in milliseconds: 35
2 < 500
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:17:10 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:17:10.778+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 'ALEATORIA'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 'ALEATORIA'","path":"/carteira/3/'ALEATORIA'"}

14:17:10.784 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 35, url: http://localhost:8080/carteira/3/'ALEATORIA', response: 
{"timestamp":"2022-12-08T17:17:10.778+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 'ALEATORIA'\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 'ALEATORIA'","path":"/carteira/3/'ALEATORIA'"}
src/test/java/features/Pix.feature:30
14:17:12.730 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:18:00.260 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:18:00.268 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519880266
14:18:00.307 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:18:01.590 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:01.716 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:18:01.718 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:18:01.730 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:18:01.731 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:18:02.592 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:18:02.647 [main] DEBUG com.intuit.karate - response time in milliseconds: 51
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:18:02 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:18:02.651 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:18:02.665 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/4
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:18:02.671 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:18:02 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:18:02.672 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:18:02.687 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:18:02.689 [main] INFO  com.intuit.karate - [print] 4 
14:18:02.694 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":4},"saldo":10000.0}

14:18:02.705 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:18:02 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":4,"idPessoa":{"id":4,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:18:02.706 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "idPessoa": {
    "id": 4,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:18:02.708 [main] INFO  com.intuit.karate - [print] 4 
14:18:02.711 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:18:02.730 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:18:02 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":8,"tipoChave":"CPF","descricao":"50308547699"},{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:18:02.734 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 6,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacao@gmail.com"
      },
      {
        "id": 7,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 8,
        "tipoChave": "CPF",
        "descricao": "50308547699"
      },
      {
        "id": 9,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:18:02.738 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:18:02.761 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:19
And set body.descricao = emailautomacao@gmail.com
js failed:
>>>>
01: emailautomacao@gmail.com
<<<<
org.graalvm.polyglot.PolyglotException: SyntaxError: Unnamed:1:14 Expected ; but found error
emailautomacao@gmail.com
              ^

- org.graalvm.polyglot.Context.eval(Context.java:401)
- com.intuit.karate.graal.JsEngine.evalForValue(JsEngine.java:141)
- com.intuit.karate.graal.JsEngine.eval(JsEngine.java:137)
- com.intuit.karate.core.ScenarioEngine.evalJs(ScenarioEngine.java:1344)
- com.intuit.karate.core.ScenarioEngine.evalKarateExpression(ScenarioEngine.java:2373)
- com.intuit.karate.core.ScenarioEngine.evalKarateExpression(ScenarioEngine.java:2292)
- com.intuit.karate.core.ScenarioEngine.set(ScenarioEngine.java:1706)

src/test/java/features/Pix.feature:19
14:18:02.763 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:18:02.772 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:02.794 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 51
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":1.1940028922E10}

14:18:02.818 [main] DEBUG com.intuit.karate - response time in milliseconds: 24
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:18:02 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":10,"tipoChave":"CELULAR","descricao":"1.1940028922E10"}

14:18:02.823 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao == 11940028922
match failed: EQUALS
  $ | data types don't match (STRING:NUMBER)
  '1.1940028922E10'
  1.1940028922E10

src/test/java/features/Pix.feature:25
14:18:02.824 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:18:02.830 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:02.844 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 47
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":5.0308547699E10}

14:18:02.872 [main] DEBUG com.intuit.karate - response time in milliseconds: 27
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:18:02 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":11,"tipoChave":"CPF","descricao":"5.0308547699E10"}

14:18:02.875 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:25
Then match response.descricao == 50308547699
match failed: EQUALS
  $ | data types don't match (STRING:NUMBER)
  '5.0308547699E10'
  5.0308547699E10

src/test/java/features/Pix.feature:25
14:18:02.876 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:18:02.881 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:02.897 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:19
And set body.descricao = ALEATORIA
js failed:
>>>>
01: ALEATORIA
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:19
14:18:04.045 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:18:37.328 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:18:37.335 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670519917334
14:18:37.384 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:18:38.892 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:39.045 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:18:39.046 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:18:39.060 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:18:39.061 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:18:39.788 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:18:39.822 [main] DEBUG com.intuit.karate - response time in milliseconds: 32
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:18:39 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:18:39.824 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:18:39.833 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/5
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:18:39.837 [main] DEBUG com.intuit.karate - response time in milliseconds: 3
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:18:39 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:18:39.838 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:18:39.851 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:18:39.853 [main] INFO  com.intuit.karate - [print] 5 
14:18:39.856 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":5},"saldo":10000.0}

14:18:39.861 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:18:39 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":5,"idPessoa":{"id":5,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:18:39.862 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "idPessoa": {
    "id": 5,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:18:39.864 [main] INFO  com.intuit.karate - [print] 5 
14:18:39.868 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:18:39.881 [main] DEBUG com.intuit.karate - response time in milliseconds: 13
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:18:39 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":8,"tipoChave":"CPF","descricao":"50308547699"},{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":10,"tipoChave":"CELULAR","descricao":"1.1940028922E10"},{"id":11,"tipoChave":"CPF","descricao":"5.0308547699E10"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:18:39.883 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 6,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacao@gmail.com"
      },
      {
        "id": 7,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 8,
        "tipoChave": "CPF",
        "descricao": "50308547699"
      },
      {
        "id": 9,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 10,
        "tipoChave": "CELULAR",
        "descricao": "1.1940028922E10"
      },
      {
        "id": 11,
        "tipoChave": "CPF",
        "descricao": "5.0308547699E10"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:18:39.886 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:18:39.890 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/5
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:18:39.927 [main] DEBUG com.intuit.karate - response time in milliseconds: 37
5 < 500
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:18:39 GMT
5 < Connection: close
{"timestamp":"2022-12-08T17:18:39.923+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}

14:18:39.930 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 37, url: http://localhost:8080/chaves-pix/5, response: 
{"timestamp":"2022-12-08T17:18:39.923+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}
src/test/java/features/Pix.feature:22
14:18:39.935 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:18:39.942 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:39.956 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:18:40.010 [main] DEBUG com.intuit.karate - response time in milliseconds: 54
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:18:39 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:18:40.005+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}

14:18:40.013 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 54, url: http://localhost:8080/chaves-pix/5, response: 
{"timestamp":"2022-12-08T17:18:40.005+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}
src/test/java/features/Pix.feature:22
14:18:40.025 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:18:40.034 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:40.053 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:18:40.106 [main] DEBUG com.intuit.karate - response time in milliseconds: 53
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:18:39 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:18:40.102+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}

14:18:40.110 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 53, url: http://localhost:8080/chaves-pix/5, response: 
{"timestamp":"2022-12-08T17:18:40.102+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}
src/test/java/features/Pix.feature:22
14:18:40.115 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:18:40.119 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:18:40.127 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:18:40.174 [main] DEBUG com.intuit.karate - response time in milliseconds: 46
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:18:39 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:18:40.171+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}

14:18:40.177 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 46, url: http://localhost:8080/chaves-pix/5, response: 
{"timestamp":"2022-12-08T17:18:40.171+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}
src/test/java/features/Pix.feature:22
14:18:41.324 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:20:07.268 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:20:07.279 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670520007278
14:20:07.320 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:20:08.668 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:20:08.821 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:20:08.823 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:20:08.837 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:20:08.838 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:20:09.549 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:20:09.848 [main] DEBUG com.intuit.karate - response time in milliseconds: 295
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:20:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:20:09.853 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:20:09.871 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:20:09.928 [main] DEBUG com.intuit.karate - response time in milliseconds: 56
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:20:09 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:20:09.929 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:20:09.953 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:20:09.955 [main] INFO  com.intuit.karate - [print] 3 
14:20:09.959 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

14:20:09.992 [main] DEBUG com.intuit.karate - response time in milliseconds: 32
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:20:09 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:20:09.993 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:20:09.996 [main] INFO  com.intuit.karate - [print] 3 
14:20:09.999 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:20:10.080 [main] DEBUG com.intuit.karate - response time in milliseconds: 81
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:20:09 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:20:10.083 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:20:10.085 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:20:10.090 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:20:10.113 [main] DEBUG com.intuit.karate - response time in milliseconds: 22
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:20:09 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:20:10.134 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/' + novaCarteira.idCarteira + '/' + emailautomacao@gmail.com
js failed:
>>>>
01: '/carteira/' + novaCarteira.idCarteira + '/' + emailautomacao@gmail.com
<<<<
org.graalvm.polyglot.PolyglotException: SyntaxError: Unnamed:1:61 Expected ; but found error
'/carteira/' + novaCarteira.idCarteira + '/' + emailautomacao@gmail.com
                                                             ^

- org.graalvm.polyglot.Context.eval(Context.java:401)
- com.intuit.karate.graal.JsEngine.evalForValue(JsEngine.java:141)
- com.intuit.karate.graal.JsEngine.eval(JsEngine.java:137)
- com.intuit.karate.core.ScenarioEngine.evalJs(ScenarioEngine.java:1344)
- com.intuit.karate.core.ScenarioEngine.path(ScenarioEngine.java:373)
- com.intuit.karate.ScenarioActions.path(ScenarioActions.java:82)
- sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

src/test/java/features/Pix.feature:28
14:20:10.136 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:20:10.143 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:20:10.155 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:20:10.169 [main] DEBUG com.intuit.karate - response time in milliseconds: 14
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:20:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

14:20:10.185 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/11940028922
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:20:10.286 [main] DEBUG com.intuit.karate - response time in milliseconds: 101
2 < 200
2 < Content-Type: text/plain;charset=UTF-8
2 < Content-Length: 31
2 < Date: Thu, 08 Dec 2022 17:20:09 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
Chave PIX deletada com sucesso!

14:20:10.287 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:20:10.293 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:20:10.306 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:20:10.318 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:20:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

14:20:10.323 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/50308547699
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:20:10.339 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
2 < 200
2 < Content-Type: text/plain;charset=UTF-8
2 < Content-Length: 31
2 < Date: Thu, 08 Dec 2022 17:20:09 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
Chave PIX deletada com sucesso!

14:20:10.340 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:20:10.346 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:20:10.361 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:20:10.376 [main] DEBUG com.intuit.karate - response time in milliseconds: 15
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:20:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:20:10.383 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/' + novaCarteira.idCarteira + '/' + ALEATORIA
js failed:
>>>>
01: '/carteira/' + novaCarteira.idCarteira + '/' + ALEATORIA
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
14:20:11.708 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:23:22.483 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:23:22.490 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670520202488
14:23:22.553 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:23:24.171 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:23:24.307 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:23:24.309 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:23:24.322 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:23:24.323 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:23:25.057 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:23:25.408 [main] DEBUG com.intuit.karate - response time in milliseconds: 348
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:23:25 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:23:25.413 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:23:25.438 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:23:25.534 [main] DEBUG com.intuit.karate - response time in milliseconds: 95
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:23:25 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:23:25.536 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:23:25.560 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:23:25.563 [main] INFO  com.intuit.karate - [print] 3 
14:23:25.567 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

14:23:25.599 [main] DEBUG com.intuit.karate - response time in milliseconds: 32
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:23:25 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:23:25.600 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:23:25.603 [main] INFO  com.intuit.karate - [print] 3 
14:23:25.605 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:23:25.710 [main] DEBUG com.intuit.karate - response time in milliseconds: 104
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:23:25 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:23:25.712 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:23:25.716 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:23:25.722 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:23:25.745 [main] DEBUG com.intuit.karate - response time in milliseconds: 22
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:23:25 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:23:25.768 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/' + novaCarteira.idCarteira + '/' + emailautomacao@gmail.com
js failed:
>>>>
01: '/carteira/' + novaCarteira.idCarteira + '/' + emailautomacao@gmail.com
<<<<
org.graalvm.polyglot.PolyglotException: SyntaxError: Unnamed:1:61 Expected ; but found error
'/carteira/' + novaCarteira.idCarteira + '/' + emailautomacao@gmail.com
                                                             ^

- org.graalvm.polyglot.Context.eval(Context.java:401)
- com.intuit.karate.graal.JsEngine.evalForValue(JsEngine.java:141)
- com.intuit.karate.graal.JsEngine.eval(JsEngine.java:137)
- com.intuit.karate.core.ScenarioEngine.evalJs(ScenarioEngine.java:1344)
- com.intuit.karate.core.ScenarioEngine.path(ScenarioEngine.java:373)
- com.intuit.karate.ScenarioActions.path(ScenarioActions.java:82)
- sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

src/test/java/features/Pix.feature:28
14:23:25.769 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:23:25.778 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:23:25.793 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:23:25.813 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:23:25 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

14:23:25.824 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/11940028922
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:23:25.920 [main] DEBUG com.intuit.karate - response time in milliseconds: 96
2 < 200
2 < Content-Type: text/plain;charset=UTF-8
2 < Content-Length: 31
2 < Date: Thu, 08 Dec 2022 17:23:25 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
Chave PIX deletada com sucesso!

14:23:25.921 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:23:25.927 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:23:25.942 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:23:25.954 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:23:25 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

14:23:25.960 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/50308547699
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:23:25.979 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
2 < 200
2 < Content-Type: text/plain;charset=UTF-8
2 < Content-Length: 31
2 < Date: Thu, 08 Dec 2022 17:23:25 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
Chave PIX deletada com sucesso!

14:23:25.981 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:23:25.985 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:23:25.995 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:23:26.008 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:23:25 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:23:26.018 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/' + novaCarteira.idCarteira + '/' + ALEATORIA
js failed:
>>>>
01: '/carteira/' + novaCarteira.idCarteira + '/' + ALEATORIA
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
14:23:27.279 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:30:16.427 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:30:16.433 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670520616432
14:30:16.470 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:30:18.253 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:30:18.381 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:30:18.383 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:30:18.398 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:30:18.398 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:30:19.184 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:30:19.221 [main] DEBUG com.intuit.karate - response time in milliseconds: 35
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:30:19 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:30:19.223 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:30:19.233 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/5
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:30:19.237 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:30:19 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:30:19.238 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:30:19.253 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:30:19.254 [main] INFO  com.intuit.karate - [print] 5 
14:30:19.258 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":5},"saldo":10000.0}

14:30:19.263 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:30:19 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":5,"idPessoa":{"id":5,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:30:19.265 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "idPessoa": {
    "id": 5,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:30:19.266 [main] INFO  com.intuit.karate - [print] 5 
14:30:19.268 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:30:19.280 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:30:19 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"},{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":4,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:30:19.282 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 6,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacao@gmail.com"
      },
      {
        "id": 9,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:30:19.284 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:30:19.287 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/5
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:30:19.318 [main] DEBUG com.intuit.karate - response time in milliseconds: 31
5 < 500
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:30:19 GMT
5 < Connection: close
{"timestamp":"2022-12-08T17:30:19.313+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}

14:30:19.321 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 31, url: http://localhost:8080/chaves-pix/5, response: 
{"timestamp":"2022-12-08T17:30:19.313+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacao@gmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}
src/test/java/features/Pix.feature:22
14:30:19.325 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:30:19.333 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:30:19.343 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:30:19.352 [main] DEBUG com.intuit.karate - response time in milliseconds: 9
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:30:19 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":13,"tipoChave":"CELULAR","descricao":"11940028922"}

14:30:19.370 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/5/1.1940028922E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:30:19.389 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:30:19 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:30:19.387+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/5/1.1940028922E10"}

14:30:19.392 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 19, url: http://localhost:8080/carteira/5/1.1940028922E10, response: 
{"timestamp":"2022-12-08T17:30:19.387+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/5/1.1940028922E10"}
src/test/java/features/Pix.feature:30
14:30:19.394 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:30:19.399 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:30:19.411 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:30:19.423 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:30:19 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":14,"tipoChave":"CPF","descricao":"50308547699"}

14:30:19.429 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/5/5.0308547699E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:30:19.449 [main] DEBUG com.intuit.karate - response time in milliseconds: 20
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:30:19 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:30:19.447+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/5/5.0308547699E10"}

14:30:19.451 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 20, url: http://localhost:8080/carteira/5/5.0308547699E10, response: 
{"timestamp":"2022-12-08T17:30:19.447+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/5/5.0308547699E10"}
src/test/java/features/Pix.feature:30
14:30:19.453 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:30:19.458 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:30:19.466 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:30:19.490 [main] DEBUG com.intuit.karate - response time in milliseconds: 24
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:30:19 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:30:19.488+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}

14:30:19.493 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 24, url: http://localhost:8080/chaves-pix/5, response: 
{"timestamp":"2022-12-08T17:30:19.488+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/5"}
src/test/java/features/Pix.feature:22
14:30:20.871 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:31:15.753 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:31:15.763 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670520675761
14:31:15.835 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:31:17.316 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:31:17.494 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:31:17.496 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:31:17.515 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:31:17.515 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:31:18.317 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:31:18.760 [main] DEBUG com.intuit.karate - response time in milliseconds: 440
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:31:18 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:31:18.763 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:31:18.780 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:31:18.858 [main] DEBUG com.intuit.karate - response time in milliseconds: 78
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:31:18 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:31:18.860 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:31:18.885 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:31:18.888 [main] INFO  com.intuit.karate - [print] 3 
14:31:18.897 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

14:31:18.931 [main] DEBUG com.intuit.karate - response time in milliseconds: 34
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:31:18 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:31:18.933 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:31:18.936 [main] INFO  com.intuit.karate - [print] 3 
14:31:18.939 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:31:19.052 [main] DEBUG com.intuit.karate - response time in milliseconds: 113
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:31:18 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:31:19.054 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:31:19.061 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:31:19.068 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 60
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:31:19.097 [main] DEBUG com.intuit.karate - response time in milliseconds: 29
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:31:18 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"}

14:31:19.136 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', emailautomacao@gmail.com
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', emailautomacao@gmail.com]
<<<<
org.graalvm.polyglot.PolyglotException: SyntaxError: Unnamed:1:59 Expected comma but found error
['/carteira/', novaCarteira.idCarteira, '/', emailautomacao@gmail.com]
                                                           ^

- org.graalvm.polyglot.Context.eval(Context.java:401)
- com.intuit.karate.graal.JsEngine.evalForValue(JsEngine.java:141)
- com.intuit.karate.graal.JsEngine.eval(JsEngine.java:137)
- com.intuit.karate.core.ScenarioEngine.evalJs(ScenarioEngine.java:1344)
- com.intuit.karate.core.ScenarioEngine.path(ScenarioEngine.java:373)
- com.intuit.karate.ScenarioActions.path(ScenarioActions.java:82)
- sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

src/test/java/features/Pix.feature:28
14:31:19.137 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:31:19.151 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:31:19.181 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:31:19.197 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:31:18 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

14:31:19.216 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/1.1940028922E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:31:19.362 [main] DEBUG com.intuit.karate - response time in milliseconds: 145
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:31:18 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:31:19.333+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}

14:31:19.366 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 145, url: http://localhost:8080/carteira/3/1.1940028922E10, response: 
{"timestamp":"2022-12-08T17:31:19.333+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}
src/test/java/features/Pix.feature:30
14:31:19.368 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:31:19.376 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:31:19.395 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:31:19.428 [main] DEBUG com.intuit.karate - response time in milliseconds: 33
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:31:18 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

14:31:19.437 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/5.0308547699E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:31:19.490 [main] DEBUG com.intuit.karate - response time in milliseconds: 53
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:31:18 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:31:19.486+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/3/5.0308547699E10"}

14:31:19.494 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 53, url: http://localhost:8080/carteira/3/5.0308547699E10, response: 
{"timestamp":"2022-12-08T17:31:19.486+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/3/5.0308547699E10"}
src/test/java/features/Pix.feature:30
14:31:19.714 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:31:19.729 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:31:19.739 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:31:19.756 [main] DEBUG com.intuit.karate - response time in milliseconds: 17
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:31:19 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:31:19.765 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', ALEATORIA
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', ALEATORIA]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
14:31:21.337 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:33:02.804 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:33:02.814 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670520782813
14:33:02.856 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:33:04.808 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:33:04.980 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:33:04.981 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:33:04.997 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:33:04.997 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:33:05.781 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:33:05.816 [main] DEBUG com.intuit.karate - response time in milliseconds: 34
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:33:05 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:33:05.818 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:33:05.830 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/4
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:33:05.835 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:33:05 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:33:05.836 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:33:05.848 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:33:05.850 [main] INFO  com.intuit.karate - [print] 4 
14:33:05.853 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":4},"saldo":10000.0}

14:33:05.860 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:33:05 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":4,"idPessoa":{"id":4,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:33:05.861 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "idPessoa": {
    "id": 4,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:33:05.862 [main] INFO  com.intuit.karate - [print] 4 
14:33:05.864 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:33:05.876 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:33:05 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacao@gmail.com"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":8,"tipoChave":"CPF","descricao":"50308547699"},{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:33:05.879 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 6,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacao@gmail.com"
      },
      {
        "id": 7,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 8,
        "tipoChave": "CPF",
        "descricao": "50308547699"
      },
      {
        "id": 9,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:33:05.881 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:33:05.886 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/4
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

14:33:05.896 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:33:05 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":10,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

14:33:05.917 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "emailautomacaogmail" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
14:33:05.918 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:33:05.926 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:33:05.938 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:33:05.986 [main] DEBUG com.intuit.karate - response time in milliseconds: 48
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:33:05 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:33:05.982+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}

14:33:05.989 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 48, url: http://localhost:8080/chaves-pix/4, response: 
{"timestamp":"2022-12-08T17:33:05.982+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}
src/test/java/features/Pix.feature:22
14:33:05.992 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:33:05.999 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:33:06.011 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:33:06.049 [main] DEBUG com.intuit.karate - response time in milliseconds: 38
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:33:05 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:33:06.045+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}

14:33:06.051 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 38, url: http://localhost:8080/chaves-pix/4, response: 
{"timestamp":"2022-12-08T17:33:06.045+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 8 */ '50308547699' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}
src/test/java/features/Pix.feature:22
14:33:06.054 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:33:06.059 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:33:06.069 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:33:06.098 [main] DEBUG com.intuit.karate - response time in milliseconds: 29
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:33:05 GMT
1 < Connection: close
{"timestamp":"2022-12-08T17:33:06.094+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}

14:33:06.101 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 29, url: http://localhost:8080/chaves-pix/4, response: 
{"timestamp":"2022-12-08T17:33:06.094+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}
src/test/java/features/Pix.feature:22
14:33:07.612 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
14:34:02.364 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
14:34:02.373 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670520842372
14:34:02.419 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .*$
14:34:03.807 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:34:03.962 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
14:34:03.963 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
14:34:03.978 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
14:34:03.979 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
14:34:04.665 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

14:34:04.931 [main] DEBUG com.intuit.karate - response time in milliseconds: 234
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:34:04 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:34:04.931 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:34:04.947 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:34:04.978 [main] DEBUG com.intuit.karate - response time in milliseconds: 31
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:34:04 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

14:34:04.978 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
14:34:05.009 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
14:34:05.009 [main] INFO  com.intuit.karate - [print] 3 
14:34:05.009 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

14:34:05.040 [main] DEBUG com.intuit.karate - response time in milliseconds: 31
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 17:34:04 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

14:34:05.040 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
14:34:05.040 [main] INFO  com.intuit.karate - [print] 3 
14:34:05.040 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


14:34:05.118 [main] DEBUG com.intuit.karate - response time in milliseconds: 78
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 17:34:04 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

14:34:05.138 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
14:34:05.138 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
14:34:05.138 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

14:34:05.154 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 17:34:04 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

14:34:05.185 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "emailautomacaogmail" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
14:34:05.185 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .*$
14:34:05.185 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:34:05.201 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

14:34:05.217 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:34:04 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

14:34:05.232 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/1.1940028922E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:34:05.373 [main] DEBUG com.intuit.karate - response time in milliseconds: 141
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:34:04 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:34:05.342+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}

14:34:05.373 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 141, url: http://localhost:8080/carteira/3/1.1940028922E10, response: 
{"timestamp":"2022-12-08T17:34:05.342+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}
src/test/java/features/Pix.feature:30
14:34:05.373 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .*$
14:34:05.388 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:34:05.404 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

14:34:05.404 [main] DEBUG com.intuit.karate - response time in milliseconds: 0
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:34:04 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

14:34:05.420 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/5.0308547699E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


14:34:05.451 [main] DEBUG com.intuit.karate - response time in milliseconds: 31
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 17:34:04 GMT
2 < Connection: close
{"timestamp":"2022-12-08T17:34:05.435+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/3/5.0308547699E10"}

14:34:05.451 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 31, url: http://localhost:8080/carteira/3/5.0308547699E10, response: 
{"timestamp":"2022-12-08T17:34:05.435+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/3/5.0308547699E10"}
src/test/java/features/Pix.feature:30
14:34:05.451 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .*$
14:34:05.451 [main] INFO  com.intuit.karate - karate.env system property was: null 
14:34:05.467 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:34:05.482 [main] DEBUG com.intuit.karate - response time in milliseconds: 15
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 17:34:04 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

14:34:05.482 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', ALEATORIA
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', ALEATORIA]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
14:34:06.811 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:36:53.887 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:36:53.893 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670524613892
15:36:55.384 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:36:55.499 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:36:55.501 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:36:55.514 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:36:55.515 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:36:56.193 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:36:56.469 [main] DEBUG com.intuit.karate - response time in milliseconds: 274
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:36:56 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:36:56.472 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:36:56.485 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:36:56.541 [main] DEBUG com.intuit.karate - response time in milliseconds: 55
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:36:56 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:36:56.542 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:36:56.564 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:36:56.567 [main] INFO  com.intuit.karate - [print] 3 
15:36:56.573 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

15:36:56.614 [main] DEBUG com.intuit.karate - response time in milliseconds: 40
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:36:56 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:36:56.615 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:36:56.619 [main] INFO  com.intuit.karate - [print] 3 
15:36:56.622 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:36:56.732 [main] DEBUG com.intuit.karate - response time in milliseconds: 109
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:36:56 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:36:56.734 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:36:56.736 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:36:56.741 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:36:56.764 [main] DEBUG com.intuit.karate - response time in milliseconds: 23
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:36:56 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:36:56.791 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "emailautomacaogmail" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
15:36:56.802 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:36:56.819 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:36:56.836 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:36:56 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

15:36:56.852 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/1.1940028922E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:36:57.065 [main] DEBUG com.intuit.karate - response time in milliseconds: 213
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:36:56 GMT
2 < Connection: close
{"timestamp":"2022-12-08T18:36:57.031+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}

15:36:57.069 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 213, url: http://localhost:8080/carteira/3/1.1940028922E10, response: 
{"timestamp":"2022-12-08T18:36:57.031+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}
src/test/java/features/Pix.feature:30
15:36:57.088 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:36:57.110 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"50308547699"}

15:36:57.126 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:36:56 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"50308547699"}

15:36:57.132 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/5.0308547699E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:36:57.178 [main] DEBUG com.intuit.karate - response time in milliseconds: 46
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:36:56 GMT
2 < Connection: close
{"timestamp":"2022-12-08T18:36:57.173+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/3/5.0308547699E10"}

15:36:57.182 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 46, url: http://localhost:8080/carteira/3/5.0308547699E10, response: 
{"timestamp":"2022-12-08T18:36:57.173+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 5.0308547699E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 5.0308547699E10","path":"/carteira/3/5.0308547699E10"}
src/test/java/features/Pix.feature:30
15:36:57.190 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:36:57.202 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:36:57.229 [main] DEBUG com.intuit.karate - response time in milliseconds: 26
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:36:56 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:36:57.235 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', ALEATORIA
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', ALEATORIA]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
15:36:58.724 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:39:17.813 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:39:17.819 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670524757818
15:39:19.006 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:39:19.156 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:39:19.158 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:39:19.174 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:39:19.174 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:39:20.066 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:39:20.115 [main] DEBUG com.intuit.karate - response time in milliseconds: 45
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:39:20 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:39:20.119 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:39:20.129 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/4
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:39:20.134 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:39:20 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:39:20.135 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:39:20.149 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:39:20.151 [main] INFO  com.intuit.karate - [print] 4 
15:39:20.154 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":4},"saldo":10000.0}

15:39:20.162 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:39:20 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":4,"idPessoa":{"id":4,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:39:20.163 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "idPessoa": {
    "id": 4,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:39:20.165 [main] INFO  com.intuit.karate - [print] 4 
15:39:20.167 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:39:20.181 [main] DEBUG com.intuit.karate - response time in milliseconds: 14
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:39:20 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:39:20.184 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 6,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacaogmail.com"
      },
      {
        "id": 7,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 9,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:39:20.187 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:39:20.191 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/4
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:39:20.228 [main] DEBUG com.intuit.karate - response time in milliseconds: 37
5 < 500
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:39:20 GMT
5 < Connection: close
{"timestamp":"2022-12-08T18:39:20.224+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}

15:39:20.232 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 37, url: http://localhost:8080/chaves-pix/4, response: 
{"timestamp":"2022-12-08T18:39:20.224+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 6 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}
src/test/java/features/Pix.feature:22
15:39:20.246 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:39:20.260 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:39:20.304 [main] DEBUG com.intuit.karate - response time in milliseconds: 44
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:39:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T18:39:20.300+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}

15:39:20.307 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 44, url: http://localhost:8080/chaves-pix/4, response: 
{"timestamp":"2022-12-08T18:39:20.300+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 7 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}
src/test/java/features/Pix.feature:22
15:39:20.318 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:39:20.330 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"00000000000"}

15:39:20.341 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:39:20 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":12,"tipoChave":"CPF","descricao":"00000000000"}

15:39:20.359 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/4/0
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:39:20.379 [main] DEBUG com.intuit.karate - response time in milliseconds: 20
2 < 500
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:39:20 GMT
2 < Connection: close
{"timestamp":"2022-12-08T18:39:20.376+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 0\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 0","path":"/carteira/4/0"}

15:39:20.382 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 20, url: http://localhost:8080/carteira/4/0, response: 
{"timestamp":"2022-12-08T18:39:20.376+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 0\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 0","path":"/carteira/4/0"}
src/test/java/features/Pix.feature:30
15:39:20.389 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:39:20.397 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/4
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:39:20.425 [main] DEBUG com.intuit.karate - response time in milliseconds: 28
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:39:20 GMT
1 < Connection: close
{"timestamp":"2022-12-08T18:39:20.422+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}

15:39:20.427 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 28, url: http://localhost:8080/chaves-pix/4, response: 
{"timestamp":"2022-12-08T18:39:20.422+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 9 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/4"}
src/test/java/features/Pix.feature:22
15:39:21.656 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:40:08.617 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:40:08.624 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670524808623
15:40:09.895 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:40:10.056 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:40:10.057 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:40:10.079 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:40:10.079 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:40:10.869 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:40:11.309 [main] DEBUG com.intuit.karate - response time in milliseconds: 435
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:40:11 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:40:11.313 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:40:11.328 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:40:11.394 [main] DEBUG com.intuit.karate - response time in milliseconds: 66
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:40:11 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:40:11.396 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:40:11.425 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:40:11.429 [main] INFO  com.intuit.karate - [print] 3 
15:40:11.436 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

15:40:11.491 [main] DEBUG com.intuit.karate - response time in milliseconds: 55
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:40:11 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:40:11.493 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:40:11.499 [main] INFO  com.intuit.karate - [print] 3 
15:40:11.502 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:40:11.653 [main] DEBUG com.intuit.karate - response time in milliseconds: 151
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:40:11 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:40:11.655 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:40:11.658 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:40:11.662 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:40:11.689 [main] DEBUG com.intuit.karate - response time in milliseconds: 27
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:40:11 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:40:11.718 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', emailautomacaogmail.com]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "emailautomacaogmail" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
15:40:11.734 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:40:11.753 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:40:11.778 [main] DEBUG com.intuit.karate - response time in milliseconds: 24
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:40:11 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

15:40:11.792 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/1.1940028922E10
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:40:11.959 [main] DEBUG com.intuit.karate - response time in milliseconds: 167
2 < 500
2 < Content-Disposition: inline;filename=f.txt
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:40:11 GMT
2 < Connection: close
{"timestamp":"2022-12-08T18:40:11.923+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}

15:40:11.962 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 167, url: http://localhost:8080/carteira/3/1.1940028922E10, response: 
{"timestamp":"2022-12-08T18:40:11.923+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 1.1940028922E10\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 1.1940028922E10","path":"/carteira/3/1.1940028922E10"}
src/test/java/features/Pix.feature:30
15:40:11.973 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:40:11.989 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"00000000000"}

15:40:12.012 [main] DEBUG com.intuit.karate - response time in milliseconds: 23
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:40:11 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"00000000000"}

15:40:12.021 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/3/0
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:40:12.059 [main] DEBUG com.intuit.karate - response time in milliseconds: 37
2 < 500
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:40:11 GMT
2 < Connection: close
{"timestamp":"2022-12-08T18:40:12.055+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 0\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 0","path":"/carteira/3/0"}

15:40:12.062 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200
status code was: 500, expected: 200, response time in milliseconds: 37, url: http://localhost:8080/carteira/3/0, response: 
{"timestamp":"2022-12-08T18:40:12.055+00:00","status":500,"error":"Internal Server Error","trace":"jakarta.persistence.EntityNotFoundException: Chave PIX não encontrada: 0\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService.deleteByDescricao(ChavesPixService.java:52)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.deleteByDescricao(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.CarteiraController.deletePixByIdConta(CarteiraController.java:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:928)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:737)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"Chave PIX não encontrada: 0","path":"/carteira/3/0"}
src/test/java/features/Pix.feature:30
15:40:12.070 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:40:12.086 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:40:12.106 [main] DEBUG com.intuit.karate - response time in milliseconds: 18
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:40:11 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:40:12.111 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:28
And path '/carteira/', novaCarteira.idCarteira, '/', ALEATORIA
js failed:
>>>>
01: ['/carteira/', novaCarteira.idCarteira, '/', ALEATORIA]
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:28
15:40:13.699 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:41:31.742 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:41:31.751 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670524891749
15:41:33.358 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:41:33.550 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:41:33.553 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:41:33.573 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:41:33.573 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:41:34.304 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:43:36.421 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:43:37.992 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:43:38.219 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:43:38.221 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:43:38.239 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:43:38.240 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:43:39.078 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:43:39.482 [main] DEBUG com.intuit.karate - response time in milliseconds: 400
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:43:39 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:43:39.488 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:43:39.522 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:43:39.619 [main] DEBUG com.intuit.karate - response time in milliseconds: 95
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:43:39 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:43:39.621 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:43:39.639 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:43:39.641 [main] INFO  com.intuit.karate - [print] 3 
15:43:39.646 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

15:43:39.685 [main] DEBUG com.intuit.karate - response time in milliseconds: 38
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:43:39 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:43:39.686 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:43:39.689 [main] INFO  com.intuit.karate - [print] 3 
15:43:39.692 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:43:39.803 [main] DEBUG com.intuit.karate - response time in milliseconds: 111
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:43:39 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:43:39.806 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:43:39.809 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:43:39.825 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:15
* def varTest = emailautomacaogmail.com
js failed:
>>>>
01: emailautomacaogmail.com
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "emailautomacaogmail" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:15
15:43:39.834 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:43:39.848 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 51
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":1.1940028922E10}

15:43:39.875 [main] DEBUG com.intuit.karate - response time in milliseconds: 27
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:43:39 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":6,"tipoChave":"CELULAR","descricao":"1.1940028922E10"}

15:43:39.878 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:26
Then match response.descricao == varTest
match failed: EQUALS
  $ | data types don't match (STRING:NUMBER)
  '1.1940028922E10'
  1.1940028922E10

src/test/java/features/Pix.feature:26
15:43:39.885 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:43:39.898 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 33
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":0}

15:43:39.923 [main] DEBUG com.intuit.karate - response time in milliseconds: 25
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:43:39 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CPF","descricao":"0"}

15:43:39.926 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:26
Then match response.descricao == varTest
match failed: EQUALS
  $ | data types don't match (STRING:NUMBER)
  '0'
  0

src/test/java/features/Pix.feature:26
15:43:39.935 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:43:39.943 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:15
* def varTest = ALEATORIA
js failed:
>>>>
01: ALEATORIA
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "ALEATORIA" is not defined
- <js>.:program(Unnamed:1)

src/test/java/features/Pix.feature:15
15:43:41.419 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:47:21.363 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:47:21.371 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525241369
15:47:21.411 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 13 - ^Cadastrar chave tipo EMAIL e remover em seguida$
15:47:22.915 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:47:23.072 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:47:23.073 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:47:23.091 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:47:23.092 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:47:23.852 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:47:23.928 [main] DEBUG com.intuit.karate - response time in milliseconds: 73
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:47:23 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:47:23.931 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:47:23.942 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/4
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:47:23.948 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:47:23 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:47:23.949 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:47:23.965 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:47:23.966 [main] INFO  com.intuit.karate - [print] 4 
15:47:23.969 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":4},"saldo":10000.0}

15:47:23.976 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:47:23 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":4,"idPessoa":{"id":4,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:47:23.977 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "idPessoa": {
    "id": 4,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:47:23.979 [main] INFO  com.intuit.karate - [print] 4 
15:47:23.981 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:47:23.992 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:47:23 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":6,"tipoChave":"CELULAR","descricao":"1.1940028922E10"},{"id":7,"tipoChave":"CPF","descricao":"0"}]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:47:23.994 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 6,
        "tipoChave": "CELULAR",
        "descricao": "1.1940028922E10"
      },
      {
        "id": 7,
        "tipoChave": "CPF",
        "descricao": "0"
      }
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:47:23.996 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:47:23.999 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/4
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:47:24.007 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:47:23 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":8,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:47:24.018 [main] DEBUG com.intuit.karate - request:
6 > DELETE http://localhost:8080/carteira/4/emailautomacaogmail.com
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


15:47:24.120 [main] DEBUG com.intuit.karate - response time in milliseconds: 102
6 < 200
6 < Content-Disposition: inline;filename=f.txt
6 < Content-Type: text/plain;charset=UTF-8
6 < Content-Length: 31
6 < Date: Thu, 08 Dec 2022 18:47:23 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:47:24.121 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200 
|	'CELULAR'	|11940028922	|
|	'CPF'	|00000000000	|
|	'ALEATORIA'	|ALEATORIA	|

no step-definition method match found for: status 200
src/test/java/features/Pix.feature:30
15:47:25.601 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:48:54.134 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:48:54.140 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525334139
15:48:54.180 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 13 - ^Cadastrar chave tipo EMAIL e remover em seguida$
15:48:55.474 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:48:55.666 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:48:55.668 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:48:55.687 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:48:55.688 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:48:56.561 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:48:56.872 [main] DEBUG com.intuit.karate - response time in milliseconds: 307
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:48:56 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:48:56.875 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:48:56.890 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:48:56.964 [main] DEBUG com.intuit.karate - response time in milliseconds: 74
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:48:56 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:48:56.966 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:48:56.989 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:48:56.992 [main] INFO  com.intuit.karate - [print] 3 
15:48:56.997 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

15:48:57.034 [main] DEBUG com.intuit.karate - response time in milliseconds: 36
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:48:56 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:48:57.035 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:48:57.037 [main] INFO  com.intuit.karate - [print] 3 
15:48:57.040 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:48:57.152 [main] DEBUG com.intuit.karate - response time in milliseconds: 111
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:48:56 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:48:57.154 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:48:57.156 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:48:57.161 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:48:57.186 [main] DEBUG com.intuit.karate - response time in milliseconds: 25
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:48:56 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:48:57.200 [main] DEBUG com.intuit.karate - request:
6 > DELETE http://localhost:8080/carteira/3/emailautomacaogmail.com
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


15:48:57.297 [main] DEBUG com.intuit.karate - response time in milliseconds: 96
6 < 200
6 < Content-Disposition: inline;filename=f.txt
6 < Content-Type: text/plain;charset=UTF-8
6 < Content-Length: 31
6 < Date: Thu, 08 Dec 2022 18:48:56 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:48:57.297 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:30
And status 200 
|	'CELULAR'	|11940028922	|
|	'CPF'	|00000000000	|
|	'ALEATORIA'	|ALEATORIA	|

no step-definition method match found for: status 200
src/test/java/features/Pix.feature:30
15:48:58.531 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:49:05.360 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:49:05.367 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525345366
15:49:05.412 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 13 - ^Cadastrar chave tipo EMAIL e remover em seguida$
15:49:06.795 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:49:06.935 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:49:06.936 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:49:06.952 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:49:06.953 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:49:07.679 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:49:07.716 [main] DEBUG com.intuit.karate - response time in milliseconds: 35
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:49:07 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:49:07.718 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:49:07.731 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/4
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:49:07.737 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:49:07 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:49:07.738 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:49:07.756 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:49:07.758 [main] INFO  com.intuit.karate - [print] 4 
15:49:07.762 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":4},"saldo":10000.0}

15:49:07.769 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:49:07 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":4,"idPessoa":{"id":4,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:49:07.771 [main] INFO  com.intuit.karate - [print] {
  "id": 4,
  "idPessoa": {
    "id": 4,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:49:07.773 [main] INFO  com.intuit.karate - [print] 4 
15:49:07.775 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:49:07.789 [main] DEBUG com.intuit.karate - response time in milliseconds: 14
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:49:07 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:49:07.791 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:49:07.793 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:49:07.797 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/4
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:49:07.807 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:49:07 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":7,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:49:07.823 [main] DEBUG com.intuit.karate - request:
6 > DELETE http://localhost:8080/carteira/4/emailautomacaogmail.com
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


15:49:07.835 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
6 < 200
6 < Content-Disposition: inline;filename=f.txt
6 < Content-Type: text/plain;charset=UTF-8
6 < Content-Length: 31
6 < Date: Thu, 08 Dec 2022 18:49:07 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:49:09.075 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:49:49.782 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:49:49.789 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525389787
15:50:07.049 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:50:07.056 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525407055
15:50:07.102 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 34 - ^Cadastrar chave tipo .* e remover em seguida$
15:50:08.389 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:50:08.522 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:50:08.524 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:50:08.537 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:50:08.537 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:50:09.256 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:50:09.291 [main] DEBUG com.intuit.karate - response time in milliseconds: 33
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:50:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:50:09.294 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:50:09.303 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/5
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:50:09.309 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:50:09 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:50:09.310 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:50:09.325 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:50:09.327 [main] INFO  com.intuit.karate - [print] 5 
15:50:09.330 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":5},"saldo":10000.0}

15:50:09.336 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:50:09 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":5,"idPessoa":{"id":5,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:50:09.337 [main] INFO  com.intuit.karate - [print] {
  "id": 5,
  "idPessoa": {
    "id": 5,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:50:09.338 [main] INFO  com.intuit.karate - [print] 5 
15:50:09.340 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:50:09.352 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:50:09 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:50:09.353 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:50:09.356 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:50:09.361 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/5
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:50:09.369 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:50:09 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":8,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:50:09.381 [main] DEBUG com.intuit.karate - request:
6 > DELETE http://localhost:8080/carteira/5/emailautomacaogmail.com
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


15:50:09.392 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
6 < 200
6 < Content-Disposition: inline;filename=f.txt
6 < Content-Type: text/plain;charset=UTF-8
6 < Content-Length: 31
6 < Date: Thu, 08 Dec 2022 18:50:09 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:50:09.393 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 35 - ^Cadastrar chave tipo .* e remover em seguida$
15:50:09.399 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:50:09.411 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:50:09.421 [main] DEBUG com.intuit.karate - response time in milliseconds: 9
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:50:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"CELULAR","descricao":"11940028922"}

15:50:09.424 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/5/11940028922
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:50:09.438 [main] DEBUG com.intuit.karate - response time in milliseconds: 13
2 < 200
2 < Content-Type: text/plain;charset=UTF-8
2 < Content-Length: 31
2 < Date: Thu, 08 Dec 2022 18:50:09 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:50:09.439 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 36 - ^Cadastrar chave tipo .* e remover em seguida$
15:50:09.443 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:50:09.453 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"00000000000"}

15:50:09.460 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:50:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":10,"tipoChave":"CPF","descricao":"00000000000"}

15:50:09.465 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/5/00000000000
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:50:09.476 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
2 < 200
2 < Content-Type: text/plain;charset=UTF-8
2 < Content-Length: 31
2 < Date: Thu, 08 Dec 2022 18:50:09 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:50:09.478 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 37 - ^Cadastrar chave tipo .* e remover em seguida$
15:50:09.481 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:50:09.488 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/5
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:50:09.496 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:50:09 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":11,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:50:09.500 [main] DEBUG com.intuit.karate - request:
2 > DELETE http://localhost:8080/carteira/5/ALEATORIA
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:50:09.509 [main] DEBUG com.intuit.karate - response time in milliseconds: 9
2 < 200
2 < Content-Type: text/plain;charset=UTF-8
2 < Content-Length: 31
2 < Date: Thu, 08 Dec 2022 18:50:09 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:50:10.700 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:52:36.454 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:52:36.461 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525556460
15:52:36.505 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 40 - ^Cadastrar chave tipo .* e remover em seguida$
15:52:37.756 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:52:37.893 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:52:37.894 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:52:37.907 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:52:37.907 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:52:38.720 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:52:38.771 [main] DEBUG com.intuit.karate - response time in milliseconds: 48
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:52:38 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":6,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:52:38.774 [main] INFO  com.intuit.karate - [print] {
  "id": 6,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:52:38.785 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/6
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:52:38.790 [main] DEBUG com.intuit.karate - response time in milliseconds: 5
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:52:38 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":6,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:52:38.791 [main] INFO  com.intuit.karate - [print] {
  "id": 6,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:52:38.893 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:52:38.895 [main] INFO  com.intuit.karate - [print] 6 
15:52:38.898 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":6},"saldo":10000.0}

15:52:38.908 [main] DEBUG com.intuit.karate - response time in milliseconds: 9
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:52:38 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":6,"idPessoa":{"id":6,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:52:38.910 [main] INFO  com.intuit.karate - [print] {
  "id": 6,
  "idPessoa": {
    "id": 6,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:52:38.912 [main] INFO  com.intuit.karate - [print] 6 
15:52:38.914 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:52:38.931 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:52:38 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":6,"idPessoa":{"id":6,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:52:38.933 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpesl@gmail.com"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 6,
    "idPessoa": {
      "id": 6,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:52:38.937 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:52:38.942 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/6
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:52:38.949 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:52:38 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":13,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:52:38.955 [main] DEBUG com.intuit.karate - request:
6 > GET http://localhost:8080/chaves-pix
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


15:52:38.961 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
6 < 200
6 < Content-Type: application/json
6 < Transfer-Encoding: chunked
6 < Date: Thu, 08 Dec 2022 18:52:38 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":12,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"},{"id":13,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}]

15:52:38.964 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:31
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  13

src/test/java/features/Pix.feature:31
15:52:38.965 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 41 - ^Cadastrar chave tipo .* e remover em seguida$
15:52:38.972 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:52:38.984 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/6
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:52:38.998 [main] DEBUG com.intuit.karate - response time in milliseconds: 14
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:52:38 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":14,"tipoChave":"CELULAR","descricao":"11940028922"}

15:52:39.003 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:52:39.011 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:52:38 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":12,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"},{"id":13,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":14,"tipoChave":"CELULAR","descricao":"11940028922"}]

15:52:39.013 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:31
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  14

src/test/java/features/Pix.feature:31
15:52:39.015 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 42 - ^Cadastrar chave tipo .* e remover em seguida$
15:52:39.021 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:52:39.036 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/6
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"00000000000"}

15:52:39.047 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:52:38 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":15,"tipoChave":"CPF","descricao":"00000000000"}

15:52:39.051 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:52:39.058 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:52:38 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":12,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"},{"id":13,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":14,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":15,"tipoChave":"CPF","descricao":"00000000000"}]

15:52:39.059 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:31
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  15

src/test/java/features/Pix.feature:31
15:52:39.060 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 43 - ^Cadastrar chave tipo .* e remover em seguida$
15:52:39.065 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:52:39.074 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/6
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:52:39.082 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:52:38 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":16,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:52:39.086 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:52:39.092 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:52:38 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":12,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"},{"id":13,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":14,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":15,"tipoChave":"CPF","descricao":"00000000000"},{"id":16,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]

15:52:39.094 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:31
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  16

src/test/java/features/Pix.feature:31
15:52:40.528 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:53:35.130 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:53:35.138 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525615136
15:53:35.177 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 41 - ^Cadastrar chave tipo .* e remover em seguida$
15:53:37.019 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:53:37.170 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:53:37.172 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:53:37.194 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:53:37.194 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:53:38.111 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:53:38.146 [main] DEBUG com.intuit.karate - response time in milliseconds: 32
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:53:38 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:53:38.149 [main] INFO  com.intuit.karate - [print] {
  "id": 7,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:53:38.159 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/7
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:53:38.163 [main] DEBUG com.intuit.karate - response time in milliseconds: 4
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:53:38 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:53:38.164 [main] INFO  com.intuit.karate - [print] {
  "id": 7,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:53:38.180 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:53:38.182 [main] INFO  com.intuit.karate - [print] 7 
15:53:38.185 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":7},"saldo":10000.0}

15:53:38.191 [main] DEBUG com.intuit.karate - response time in milliseconds: 6
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:53:38 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":7,"idPessoa":{"id":7,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:53:38.192 [main] INFO  com.intuit.karate - [print] {
  "id": 7,
  "idPessoa": {
    "id": 7,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:53:38.194 [main] INFO  com.intuit.karate - [print] 7 
15:53:38.196 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:53:38.213 [main] DEBUG com.intuit.karate - response time in milliseconds: 17
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:53:38 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":4,"idPessoa":{"id":4,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":12,"tipoChave":"EMAIL","descricao":"vsdbpesl@gmail.com"}]},{"id":5,"idPessoa":{"id":5,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]},{"id":6,"idPessoa":{"id":6,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[{"id":13,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":14,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":15,"tipoChave":"CPF","descricao":"00000000000"},{"id":16,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]},{"id":7,"idPessoa":{"id":7,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:53:38.233 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 4,
    "idPessoa": {
      "id": 4,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 12,
        "tipoChave": "EMAIL",
        "descricao": "vsdbpesl@gmail.com"
      }
    ]
  },
  {
    "id": 5,
    "idPessoa": {
      "id": 5,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  },
  {
    "id": 6,
    "idPessoa": {
      "id": 6,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 13,
        "tipoChave": "EMAIL",
        "descricao": "emailautomacaogmail.com"
      },
      {
        "id": 14,
        "tipoChave": "CELULAR",
        "descricao": "11940028922"
      },
      {
        "id": 15,
        "tipoChave": "CPF",
        "descricao": "00000000000"
      },
      {
        "id": 16,
        "tipoChave": "ALEATORIA",
        "descricao": "ALEATORIA"
      }
    ]
  },
  {
    "id": 7,
    "idPessoa": {
      "id": 7,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:53:38.235 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:53:38.240 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/7
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:53:38.287 [main] DEBUG com.intuit.karate - response time in milliseconds: 47
5 < 500
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:53:38 GMT
5 < Connection: close
{"timestamp":"2022-12-08T18:53:38.282+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 13 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 13 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 13 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}

15:53:38.290 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 47, url: http://localhost:8080/chaves-pix/7, response: 
{"timestamp":"2022-12-08T18:53:38.282+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 13 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 13 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 13 */ 'emailautomacaogmail.com' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}
src/test/java/features/Pix.feature:22
15:53:38.293 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 42 - ^Cadastrar chave tipo .* e remover em seguida$
15:53:38.303 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:53:38.318 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/7
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:53:38.353 [main] DEBUG com.intuit.karate - response time in milliseconds: 34
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:53:38 GMT
1 < Connection: close
{"timestamp":"2022-12-08T18:53:38.349+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 14 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 14 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 14 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}

15:53:38.356 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 34, url: http://localhost:8080/chaves-pix/7, response: 
{"timestamp":"2022-12-08T18:53:38.349+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 14 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 14 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 14 */ '11940028922' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}
src/test/java/features/Pix.feature:22
15:53:38.359 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 43 - ^Cadastrar chave tipo .* e remover em seguida$
15:53:38.364 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:53:38.376 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/7
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"00000000000"}

15:53:38.406 [main] DEBUG com.intuit.karate - response time in milliseconds: 30
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:53:38 GMT
1 < Connection: close
{"timestamp":"2022-12-08T18:53:38.402+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 15 */ '00000000000' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 15 */ '00000000000' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 15 */ '00000000000' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}

15:53:38.409 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 30, url: http://localhost:8080/chaves-pix/7, response: 
{"timestamp":"2022-12-08T18:53:38.402+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 15 */ '00000000000' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 15 */ '00000000000' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 15 */ '00000000000' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}
src/test/java/features/Pix.feature:22
15:53:38.412 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 44 - ^Cadastrar chave tipo .* e remover em seguida$
15:53:38.413 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:53:38.426 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/7
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:53:38.452 [main] DEBUG com.intuit.karate - response time in milliseconds: 26
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:53:38 GMT
1 < Connection: close
{"timestamp":"2022-12-08T18:53:38.449+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 16 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 16 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 16 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}

15:53:38.454 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:22
And status 201
status code was: 500, expected: 201, response time in milliseconds: 26, url: http://localhost:8080/chaves-pix/7, response: 
{"timestamp":"2022-12-08T18:53:38.449+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 16 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:270)\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\r\n\tat br.com.meta.bank.metabank.services.ChavesPixService$$SpringCGLIB$$0.save(<generated>)\r\n\tat br.com.meta.bank.metabank.controllers.ChavesPixController.save(ChavesPixController.java:43)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:39)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3386)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3991)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:103)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:612)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:483)\r\n\tat java.base/java.util.LinkedHashMap.forEach(Unknown Source)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:480)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:329)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1422)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:476)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2233)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1929)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 64 more\r\nCaused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: \"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 16 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:508)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n\tat org.h2.message.DbException.get(DbException.java:223)\r\n\tat org.h2.message.DbException.get(DbException.java:199)\r\n\tat org.h2.index.Index.getDuplicateKeyException(Index.java:525)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)\r\n\tat org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)\r\n\tat org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)\r\n\tat org.h2.command.dml.Insert.insertRows(Insert.java:174)\r\n\tat org.h2.command.dml.Insert.update(Insert.java:135)\r\n\tat org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74)\r\n\tat org.h2.command.CommandContainer.update(CommandContainer.java:169)\r\n\tat org.h2.command.Command.executeUpdate(Command.java:252)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)\r\n\t... 84 more\r\n","message":"could not execute statement; SQL [n/a]; constraint [\"PUBLIC.UK_2UBUCHISM4YLVYL8WPCI3ECN3_INDEX_A ON PUBLIC.CHAVESPIX(DESCRICAO NULLS FIRST) VALUES ( /* 16 */ 'ALEATORIA' )\"; SQL statement:\ninsert into chavespix (descricao, tipo_chave, id) values (?, ?, ?) [23505-214]]","path":"/chaves-pix/7"}
src/test/java/features/Pix.feature:22
15:53:40.097 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:54:10.109 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:54:10.117 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525650116
15:54:10.163 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 41 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:11.936 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:12.129 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:54:12.131 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:54:12.146 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:54:12.147 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:54:12.935 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:54:13.294 [main] DEBUG com.intuit.karate - response time in milliseconds: 357
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:13 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:54:13.297 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:54:13.310 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:13.371 [main] DEBUG com.intuit.karate - response time in milliseconds: 60
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:13 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:54:13.372 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:54:13.393 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:54:13.395 [main] INFO  com.intuit.karate - [print] 3 
15:54:13.400 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

15:54:13.431 [main] DEBUG com.intuit.karate - response time in milliseconds: 31
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:54:13 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:54:13.432 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:54:13.437 [main] INFO  com.intuit.karate - [print] 3 
15:54:13.439 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:54:13.539 [main] DEBUG com.intuit.karate - response time in milliseconds: 99
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:54:13 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:54:13.542 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:54:13.545 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:54:13.550 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:54:13.578 [main] DEBUG com.intuit.karate - response time in milliseconds: 26
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:54:13 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:54:13.583 [main] INFO  com.intuit.karate - [print] 6 
15:54:13.585 [main] DEBUG com.intuit.karate - request:
6 > GET http://localhost:8080/chaves-pix
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


15:54:13.597 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
6 < 200
6 < Content-Type: application/json
6 < Transfer-Encoding: chunked
6 < Date: Thu, 08 Dec 2022 18:54:13 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}]

15:54:13.600 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:32
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  6

src/test/java/features/Pix.feature:32
15:54:13.601 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 42 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:13.611 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:13.624 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:54:13.659 [main] DEBUG com.intuit.karate - response time in milliseconds: 35
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:13 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

15:54:13.663 [main] INFO  com.intuit.karate - [print] 7 
15:54:13.665 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:13.675 [main] DEBUG com.intuit.karate - response time in milliseconds: 10
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:13 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}]

15:54:13.677 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:32
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  7

src/test/java/features/Pix.feature:32
15:54:13.678 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 43 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:13.684 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:13.696 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"00000000000"}

15:54:13.709 [main] DEBUG com.intuit.karate - response time in milliseconds: 13
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:13 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"00000000000"}

15:54:13.712 [main] INFO  com.intuit.karate - [print] 8 
15:54:13.714 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:13.722 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:13 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":8,"tipoChave":"CPF","descricao":"00000000000"}]

15:54:13.724 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:32
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  8

src/test/java/features/Pix.feature:32
15:54:13.725 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 44 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:13.729 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:13.736 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:54:13.749 [main] DEBUG com.intuit.karate - response time in milliseconds: 13
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:13 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:54:13.750 [main] INFO  com.intuit.karate - [print] 9 
15:54:13.752 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:13.759 [main] DEBUG com.intuit.karate - response time in milliseconds: 7
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:13 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"},{"id":8,"tipoChave":"CPF","descricao":"00000000000"},{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]

15:54:13.760 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:32
Then match response.id contains idChaveCriada
match failed: CONTAINS
  $ | actual path does not exist (STRING:NUMBER)
  '#notpresent'
  9

src/test/java/features/Pix.feature:32
15:54:15.134 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
15:54:55.909 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
15:54:55.916 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670525695915
15:54:55.953 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 41 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:57.359 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:57.480 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Carteira.feature@TC-02')
15:54:57.481 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Carteira.feature - call by tag at line 13: TC-02
15:54:57.494 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('classpath:features/Pessoas.feature@TC-01')
15:54:57.494 [main] INFO  c.intuit.karate.core.FeatureRuntime - classpath:features/Pessoas.feature - call by tag at line 12: TC-01
15:54:58.228 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/pessoa
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 162
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao","senha":"testes123"}

15:54:58.583 [main] DEBUG com.intuit.karate - response time in milliseconds: 352
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:58 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:54:58.586 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:54:58.601 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/pessoa/3
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:58.659 [main] DEBUG com.intuit.karate - response time in milliseconds: 58
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:58 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","status":"Teste","login":"Automacao","telefone":"11940028922"}

15:54:58.660 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "cpf": "043.700.270-55",
  "nome": "RoboAutomacao",
  "email": "automacao@gmail.com.br",
  "status": "Teste",
  "login": "Automacao",
  "telefone": "11940028922"
}
 
15:54:58.682 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Pessoas.feature@TC-01')
15:54:58.684 [main] INFO  com.intuit.karate - [print] 3 
15:54:58.689 [main] DEBUG com.intuit.karate - request:
3 > POST http://localhost:8080/carteira
3 > Content-Type: application/json; charset=UTF-8
3 > Content-Length: 37
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate
{"idPessoa":{"id":3},"saldo":10000.0}

15:54:58.718 [main] DEBUG com.intuit.karate - response time in milliseconds: 29
3 < 201
3 < Content-Type: application/json
3 < Transfer-Encoding: chunked
3 < Date: Thu, 08 Dec 2022 18:54:58 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
{"id":3,"idPessoa":{"id":3,"cpf":null,"nome":null,"email":null,"telefone":null,"status":null,"login":null},"saldo":10000.0,"chavePix":null}

15:54:58.719 [main] INFO  com.intuit.karate - [print] {
  "id": 3,
  "idPessoa": {
    "id": 3,
    "cpf": null,
    "nome": null,
    "email": null,
    "telefone": null,
    "status": null,
    "login": null
  },
  "saldo": 10000.0,
  "chavePix": null
}
 
15:54:58.722 [main] INFO  com.intuit.karate - [print] 3 
15:54:58.726 [main] DEBUG com.intuit.karate - request:
4 > GET http://localhost:8080/carteira
4 > Host: localhost:8080
4 > Connection: Keep-Alive
4 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
4 > Accept-Encoding: gzip,deflate


15:54:58.819 [main] DEBUG com.intuit.karate - response time in milliseconds: 93
4 < 200
4 < Content-Type: application/json
4 < Transfer-Encoding: chunked
4 < Date: Thu, 08 Dec 2022 18:54:58 GMT
4 < Keep-Alive: timeout=60
4 < Connection: keep-alive
[{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5042.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":10000.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},{"id":3,"idPessoa":{"id":3,"cpf":"043.700.270-55","nome":"RoboAutomacao","email":"automacao@gmail.com.br","telefone":"11940028922","status":"Teste","login":"Automacao"},"saldo":10000.0,"chavePix":[]}]

15:54:58.822 [main] INFO  com.intuit.karate - [print] [
  {
    "id": 1,
    "idPessoa": {
      "id": 1,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 5042.98,
    "chavePix": [
      {
        "id": 2,
        "tipoChave": "EMAIL",
        "descricao": "email@email.com"
      },
      {
        "id": 1,
        "tipoChave": "CELULAR",
        "descricao": "11999999999"
      }
    ]
  },
  {
    "id": 2,
    "idPessoa": {
      "id": 2,
      "cpf": "1234",
      "nome": "Micael Trivelato",
      "email": "micael.hyppolito@deal.com.br",
      "telefone": "11999999999",
      "status": "Ativo",
      "login": "micael3600"
    },
    "saldo": 10000.0,
    "chavePix": [
      {
        "id": 3,
        "tipoChave": "CPF",
        "descricao": "4044040430"
      }
    ]
  },
  {
    "id": 3,
    "idPessoa": {
      "id": 3,
      "cpf": "043.700.270-55",
      "nome": "RoboAutomacao",
      "email": "automacao@gmail.com.br",
      "telefone": "11940028922",
      "status": "Teste",
      "login": "Automacao"
    },
    "saldo": 10000.0,
    "chavePix": [
    ]
  }
]
 
15:54:58.824 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('classpath:features/Carteira.feature@TC-02')
15:54:58.832 [main] DEBUG com.intuit.karate - request:
5 > POST http://localhost:8080/chaves-pix/3
5 > Content-Type: application/json; charset=UTF-8
5 > Content-Length: 59
5 > Host: localhost:8080
5 > Connection: Keep-Alive
5 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
5 > Accept-Encoding: gzip,deflate
{"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:54:58.857 [main] DEBUG com.intuit.karate - response time in milliseconds: 25
5 < 201
5 < Content-Type: application/json
5 < Transfer-Encoding: chunked
5 < Date: Thu, 08 Dec 2022 18:54:58 GMT
5 < Keep-Alive: timeout=60
5 < Connection: keep-alive
{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}

15:54:58.861 [main] INFO  com.intuit.karate - [print] 6 
15:54:58.863 [main] DEBUG com.intuit.karate - request:
6 > GET http://localhost:8080/chaves-pix
6 > Host: localhost:8080
6 > Connection: Keep-Alive
6 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
6 > Accept-Encoding: gzip,deflate


15:54:58.872 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
6 < 200
6 < Content-Type: application/json
6 < Transfer-Encoding: chunked
6 < Date: Thu, 08 Dec 2022 18:54:58 GMT
6 < Keep-Alive: timeout=60
6 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":6,"tipoChave":"EMAIL","descricao":"emailautomacaogmail.com"}]

15:54:58.884 [main] DEBUG com.intuit.karate - request:
7 > DELETE http://localhost:8080/carteira/3/emailautomacaogmail.com
7 > Host: localhost:8080
7 > Connection: Keep-Alive
7 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
7 > Accept-Encoding: gzip,deflate


15:54:58.980 [main] DEBUG com.intuit.karate - response time in milliseconds: 95
7 < 200
7 < Content-Disposition: inline;filename=f.txt
7 < Content-Type: text/plain;charset=UTF-8
7 < Content-Length: 31
7 < Date: Thu, 08 Dec 2022 18:54:58 GMT
7 < Keep-Alive: timeout=60
7 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:54:58.981 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 42 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:58.990 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:59.002 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CELULAR","descricao":"11940028922"}

15:54:59.025 [main] DEBUG com.intuit.karate - response time in milliseconds: 23
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:58 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}

15:54:59.030 [main] INFO  com.intuit.karate - [print] 7 
15:54:59.032 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:59.045 [main] DEBUG com.intuit.karate - response time in milliseconds: 12
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:58 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":7,"tipoChave":"CELULAR","descricao":"11940028922"}]

15:54:59.049 [main] DEBUG com.intuit.karate - request:
3 > DELETE http://localhost:8080/carteira/3/11940028922
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate


15:54:59.068 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
3 < 200
3 < Content-Type: text/plain;charset=UTF-8
3 < Content-Length: 31
3 < Date: Thu, 08 Dec 2022 18:54:58 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:54:59.070 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 43 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:59.076 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:59.094 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 45
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"CPF","descricao":"00000000000"}

15:54:59.116 [main] DEBUG com.intuit.karate - response time in milliseconds: 21
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:58 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":8,"tipoChave":"CPF","descricao":"00000000000"}

15:54:59.121 [main] INFO  com.intuit.karate - [print] 8 
15:54:59.123 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:59.134 [main] DEBUG com.intuit.karate - response time in milliseconds: 11
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:58 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":8,"tipoChave":"CPF","descricao":"00000000000"}]

15:54:59.140 [main] DEBUG com.intuit.karate - request:
3 > DELETE http://localhost:8080/carteira/3/00000000000
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate


15:54:59.161 [main] DEBUG com.intuit.karate - response time in milliseconds: 19
3 < 200
3 < Content-Type: text/plain;charset=UTF-8
3 < Content-Length: 31
3 < Date: Thu, 08 Dec 2022 18:54:58 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:54:59.162 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 44 - ^Cadastrar chave tipo .* e remover em seguida$
15:54:59.168 [main] INFO  com.intuit.karate - karate.env system property was: null 
15:54:59.177 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/chaves-pix/3
1 > Content-Type: application/json; charset=UTF-8
1 > Content-Length: 49
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:54:59.194 [main] DEBUG com.intuit.karate - response time in milliseconds: 17
1 < 201
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 18:54:58 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}

15:54:59.196 [main] INFO  com.intuit.karate - [print] 9 
15:54:59.198 [main] DEBUG com.intuit.karate - request:
2 > GET http://localhost:8080/chaves-pix
2 > Host: localhost:8080
2 > Connection: Keep-Alive
2 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
2 > Accept-Encoding: gzip,deflate


15:54:59.206 [main] DEBUG com.intuit.karate - response time in milliseconds: 8
2 < 200
2 < Content-Type: application/json
2 < Transfer-Encoding: chunked
2 < Date: Thu, 08 Dec 2022 18:54:58 GMT
2 < Keep-Alive: timeout=60
2 < Connection: keep-alive
[{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"},{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":3,"tipoChave":"CPF","descricao":"4044040430"},{"id":4,"tipoChave":"ALEATORIA","descricao":"j48yf61n3i7kj8g1nuk5y478hgu1k4n5hu3gm1k45hgm1kl4h53"},{"id":5,"tipoChave":"CPF","descricao":"2022020230"},{"id":9,"tipoChave":"ALEATORIA","descricao":"ALEATORIA"}]

15:54:59.212 [main] DEBUG com.intuit.karate - request:
3 > DELETE http://localhost:8080/carteira/3/ALEATORIA
3 > Host: localhost:8080
3 > Connection: Keep-Alive
3 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
3 > Accept-Encoding: gzip,deflate


15:54:59.228 [main] DEBUG com.intuit.karate - response time in milliseconds: 16
3 < 200
3 < Content-Type: text/plain;charset=UTF-8
3 < Content-Length: 31
3 < Date: Thu, 08 Dec 2022 18:54:58 GMT
3 < Keep-Alive: timeout=60
3 < Connection: keep-alive
Chave PIX deletada com sucesso!

15:55:00.553 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:06:27.790 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:06:27.797 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670526387795
16:06:27.841 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:06:29.253 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:06:29.457 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:56
* def result = call randomNum '5'
js failed:
>>>>
01: function(args) {
02:   var randomNum = Java.type('utils.Utils');
03:   var rn = new RandomNum();
04:   return rn.randomNum(args);
05: }
<<<<
org.graalvm.polyglot.PolyglotException: ReferenceError: "RandomNum" is not defined
- <js>.:anonymous(Unnamed:3)

src/test/java/features/Pix.feature:56
16:06:30.355 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:07:14.620 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:07:14.627 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670526434626
16:07:14.666 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:07:15.858 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:07:16.028 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:56
* def result = call randomNum '5'
js failed:
>>>>
01: function(args) {
02:   var randomNum = Java.type('utils.Utils');
03:   var rn = new randomNum();
04:   return rn.randomNum(args);
05: }
<<<<
org.graalvm.polyglot.PolyglotException: TypeError: invokeMember (randomNum) on utils.Utils@758f4f03 failed due to: Cannot convert '5'(language: Java, type: java.lang.String) to Java type 'java.lang.Integer': Invalid or lossy primitive coercion.
- <js>.:anonymous(Unnamed:4)

src/test/java/features/Pix.feature:56
16:07:17.650 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:07:39.928 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:07:39.935 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670526459934
16:07:39.976 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:07:41.173 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:07:41.345 [main] INFO  com.intuit.karate - [print] 5 
16:07:43.206 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:47:16.801 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:47:16.812 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670528836808
16:47:16.851 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:47:18.010 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:47:18.174 [main] INFO  com.intuit.karate - [print] 82009 
16:47:18.963 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:47:39.725 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:47:39.732 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670528859731
16:47:39.770 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:47:40.998 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:47:41.158 [main] INFO  com.intuit.karate - [print] 202773 
16:47:42.051 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:47:54.495 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:47:54.506 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670528874504
16:47:54.559 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:47:55.949 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:47:56.184 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:56
* def result = call randomNum '3'
js failed:
>>>>
01: function(args) {
02:   var randomNum = Java.type('utils.Utils');
03:   var rn = new randomNum();
04:   return rn.randomNum(args);
05: }
<<<<
org.graalvm.polyglot.PolyglotException: TypeError: invokeMember (randomNum) on utils.Utils@758f4f03 failed due to: Cannot convert '3'(language: Java, type: java.lang.String) to Java type 'int': Invalid or lossy primitive coercion.
- <js>.:anonymous(Unnamed:4)

src/test/java/features/Pix.feature:56
16:47:57.113 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:48:09.222 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:48:09.228 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670528889227
16:48:09.262 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:48:10.409 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:48:10.557 [main] INFO  com.intuit.karate - [print] 951459 
16:48:11.340 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:48:16.146 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:48:16.152 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670528896151
16:48:16.194 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:48:17.666 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:49:11.319 [main] INFO  com.intuit.karate - [print] 621410 
16:49:22.035 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:49:22.050 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670528962047
16:49:22.098 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:49:23.462 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:49:23.630 [main] INFO  com.intuit.karate - [print] 518771 
16:49:24.392 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:50:05.651 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:50:05.658 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670529005657
16:50:05.693 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:50:06.895 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:50:07.175 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:56
* def result = call randomNum 3
js failed:
>>>>
01: function(args) {
02:   var randomNum = Java.type('utils.Utils');
03:   var rn = new randomNum();
04:   return rn.randomNum(args);
05: }
<<<<
org.graalvm.polyglot.PolyglotException: TypeError: invokeMember (randomNum) on utils.Utils@61edc883 failed due to: Arity error - expected: 0 actual: 1
- <js>.:anonymous(Unnamed:4)

src/test/java/features/Pix.feature:56
16:50:08.074 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:50:36.284 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:50:36.290 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670529036289
16:50:36.331 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:50:37.591 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:50:37.754 [main] ERROR com.intuit.karate - src/test/java/features/Pix.feature:56
* def result = call randomNum
js failed:
>>>>
01: function(args) {
02:   var randomNum = Java.type('utils.Utils');
03:   var rn = new randomNum();
04:   return rn.randomNum(args);
05: }
<<<<
org.graalvm.polyglot.PolyglotException: TypeError: invokeMember (randomNum) on utils.Utils@5398edd0 failed due to: Arity error - expected: 0 actual: 1
- <js>.:anonymous(Unnamed:4)

src/test/java/features/Pix.feature:56
16:50:38.544 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:50:53.501 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:50:53.508 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670529053507
16:50:53.554 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:50:54.911 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:50:55.083 [main] INFO  com.intuit.karate - [print] 287299 
16:50:56.035 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:51:21.253 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:51:21.270 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670529081267
16:51:21.325 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:51:22.581 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:51:22.785 [main] INFO  com.intuit.karate - [print] 428101 
16:51:23.604 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:52:02.183 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:52:02.190 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670529122189
16:52:02.231 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 55 - ^Cadastro de chave PIX \<tipoChave\>$
16:52:03.681 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:52:03.875 [main] INFO  com.intuit.karate - [print] 934754 
16:52:04.714 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Pix.feature
16:55:53.480 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:55:53.487 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670529353486
16:55:53.520 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 12 - ^Realizar transferencia$
16:55:54.809 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:55:55.504 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/transferencia?chavePix=email%40email.com&valor=29&idCarteiraPagadora=1
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate


16:55:55.634 [main] DEBUG com.intuit.karate - response time in milliseconds: 127
1 < 500
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 19:55:55 GMT
1 < Connection: close
{"timestamp":"2022-12-08T19:55:55.616+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.InvalidDataAccessResourceUsageException: A conta pagadora possui idConta igual ao da conta recebedora\r\n\tat br.com.meta.bank.metabank.services.TransferenciaService.realizarTransferencia(TransferenciaService.java:48)\r\n\tat br.com.meta.bank.metabank.controllers.TransferenciaController.realizarTransferencia(TransferenciaController.java:31)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"A conta pagadora possui idConta igual ao da conta recebedora","path":"/transferencia"}

16:55:55.673 [main] ERROR com.intuit.karate - src/test/java/features/Transferencia.feature:19
And status 200
status code was: 500, expected: 200, response time in milliseconds: 127, url: http://localhost:8080/transferencia?chavePix=email%40email.com&valor=29&idCarteiraPagadora=1, response: 
{"timestamp":"2022-12-08T19:55:55.616+00:00","status":500,"error":"Internal Server Error","trace":"org.springframework.dao.InvalidDataAccessResourceUsageException: A conta pagadora possui idConta igual ao da conta recebedora\r\n\tat br.com.meta.bank.metabank.services.TransferenciaService.realizarTransferencia(TransferenciaService.java:48)\r\n\tat br.com.meta.bank.metabank.controllers.TransferenciaController.realizarTransferencia(TransferenciaController.java:31)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n","message":"A conta pagadora possui idConta igual ao da conta recebedora","path":"/transferencia"}
src/test/java/features/Transferencia.feature:19
16:55:56.572 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/features/Transferencia.feature
16:56:25.847 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
16:56:25.854 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\karate-reports' dir to: target\karate-reports_1670529385853
16:56:25.888 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 12 - ^Realizar transferencia$
16:56:27.014 [main] INFO  com.intuit.karate - karate.env system property was: null 
16:56:27.723 [main] DEBUG com.intuit.karate - request:
1 > POST http://localhost:8080/transferencia?chavePix=email%40email.com&valor=29&idCarteiraPagadora=2
1 > Host: localhost:8080
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate


16:56:27.829 [main] DEBUG com.intuit.karate - response time in milliseconds: 103
1 < 200
1 < Content-Type: application/json
1 < Transfer-Encoding: chunked
1 < Date: Thu, 08 Dec 2022 19:56:27 GMT
1 < Keep-Alive: timeout=60
1 < Connection: keep-alive
{"id":2,"idCarteiraPagadora":{"id":2,"idPessoa":{"id":2,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":9971.0,"chavePix":[{"id":3,"tipoChave":"CPF","descricao":"4044040430"}]},"idCarteiraRecebedora":{"id":1,"idPessoa":{"id":1,"cpf":"1234","nome":"Micael Trivelato","email":"micael.hyppolito@deal.com.br","telefone":"11999999999","status":"Ativo","login":"micael3600"},"saldo":5071.98,"chavePix":[{"id":2,"tipoChave":"EMAIL","descricao":"email@email.com"},{"id":1,"tipoChave":"CELULAR","descricao":"11999999999"}]},"valor":29.0,"data":"2022-12-08T16:56:27.7940991"}

16:56:28.790 [main] INFO  com.intuit.karate.Suite - <<pass>> feature 1 of 1 (0 remaining) src/test/java/features/Transferencia.feature
